import{c as G,cb as ie,r as d,j as s,A as T,c5 as i,F as le,B as _,cc as oe,J as H,d as K,cW as v,ch as U,bT as de,S as ye,y as me,q as y}from"./index-27ffd735.js";import{C as M}from"./confirm-dialog-31af3c64.js";import{T as X}from"./table-pagination-custom-61c144d7.js";import{T as a}from"./TablePagination-488334e4.js";import{L as p}from"./ListItemText-ff35796a.js";import{A as Y}from"./Alert-10196a8b.js";import{L as Z}from"./LoadingButton-405ddbf1.js";function he({row:e,selected:xe,reloadFn:$,onViewRow:w,onSelectRow:ue,onDeleteRow:ee,isRegister:r,isPromotion:m}){var A,k,I,B,F,O,R,L,W,E,V,q,J,N,Q,z;const{items:je,status:t,orderNumber:ge,createdAt:fe,customer:be,totalQuantity:Ce,subTotal:Te}=e,j=G(),se=G(),h=ie(),[x,l]=d.useState(""),[ae,g]=d.useState(!1),[ne,f]=d.useState(!1),[c,b]=d.useState(""),te=()=>{g(!0)},[P,C]=d.useState(!1),D=async o=>{var u;try{if(l(""),!r&&!m&&((c==null?void 0:c.length)<5||(c==null?void 0:c.length)>19)){l("Valid Transaction id is required");return}C(!0);let n;r?n=await v.patch(U.updatePaymentStatus(e==null?void 0:e.id),{status:o}):m?n=await v.put("/api/admin/promotion/"+e.id,{status:o}):n=await v.patch(U.updateStatus(e==null?void 0:e.id),{status:o,transaction_id:c}),(u=n==null?void 0:n.data)!=null&&u.success&&(g(!1),f(!1),$()),C(!1)}catch(n){console.log(n),C(!1),l((n==null?void 0:n.message)||"Internal server error")}},re=()=>{g(!1),l(""),b("")},S=o=>{const{value:u}=o.target;b(u)},ce=s.jsxs(X,{hover:!0,children:[r?s.jsxs(s.Fragment,{children:[s.jsxs(a,{sx:{display:"flex",alignItems:"center"},children:[s.jsx(T,{alt:(A=e==null?void 0:e.Member)==null?void 0:A.full_name,src:(k=e==null?void 0:e.Member)==null?void 0:k.profile_picture,sx:{mr:2}}),s.jsx(p,{primary:(I=e==null?void 0:e.Member)==null?void 0:I.full_name,secondary:(B=e==null?void 0:e.Member)==null?void 0:B.Contact_no,primaryTypographyProps:{typography:"body2"},secondaryTypographyProps:{component:"span",color:"text.disabled"}})]}),s.jsxs(a,{children:[" ",(F=e==null?void 0:e.Member)==null?void 0:F.email_id," "]}),s.jsx(a,{children:s.jsx(p,{primary:i(new Date(e==null?void 0:e.created_at),"dd MMM yyyy"),secondary:i(new Date(e==null?void 0:e.created_at),"p"),primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{mt:.5,component:"span",typography:"caption"}})}),s.jsxs(a,{children:["₹ ",e==null?void 0:e.amount," "]}),s.jsxs(a,{children:[s.jsx(p,{primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{mt:.5,component:"span",typography:"caption"}}),e==null?void 0:e.orderId]})]}):m?s.jsxs(s.Fragment,{children:[s.jsxs(a,{sx:{display:"flex",alignItems:"center"},children:[s.jsx(T,{alt:(O=e==null?void 0:e.Business_Profile)==null?void 0:O.business_logo,src:(R=e==null?void 0:e.Business_Profile)==null?void 0:R.business_logo,sx:{mr:2}}),s.jsx(p,{primary:(W=(L=e==null?void 0:e.Business_Profile)==null?void 0:L.Member)==null?void 0:W.full_name,secondary:(V=(E=e==null?void 0:e.Business_Profile)==null?void 0:E.Member)==null?void 0:V.email_id,primaryTypographyProps:{typography:"body2"},secondaryTypographyProps:{component:"span",color:"text.disabled"}})]}),s.jsxs(a,{children:[" ",e==null?void 0:e.Business_Profile.bussiness_name," "]}),s.jsxs(a,{children:["₹ ",e==null?void 0:e.amount," "]}),s.jsx(a,{children:s.jsx(p,{primary:i(new Date(e==null?void 0:e.created_at),"dd MMM yyyy"),secondary:i(new Date(e==null?void 0:e.created_at),"p"),primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{mt:.5,component:"span",typography:"caption"}})})]}):s.jsxs(s.Fragment,{children:[s.jsxs(a,{sx:{display:"flex",alignItems:"center"},children:[s.jsx(T,{alt:(q=e==null?void 0:e.Member)==null?void 0:q.full_name,src:(J=e==null?void 0:e.Member)==null?void 0:J.profile_picture,sx:{mr:2}}),s.jsx(p,{primary:(N=e==null?void 0:e.Member)==null?void 0:N.full_name,secondary:(Q=e==null?void 0:e.Member)==null?void 0:Q.email_id,primaryTypographyProps:{typography:"body2"},secondaryTypographyProps:{component:"span",color:"text.disabled"}})]}),s.jsxs(a,{children:[" ",(z=e==null?void 0:e.Member)==null?void 0:z.Contact_no," "]}),s.jsx(a,{children:s.jsx(p,{primary:i(new Date(e==null?void 0:e.created_at),"dd MMM yyyy"),secondary:i(new Date(e==null?void 0:e.created_at),"p"),primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{mt:.5,component:"span",typography:"caption"}})}),s.jsxs(a,{children:[" ₹ ",e==null?void 0:e.amount," "]})]}),s.jsx(a,{children:s.jsx(le,{variant:"soft",color:t==="approved"&&"success"||t==="pending"&&"warning"||t==="rejected"&&"error"||"default",children:t})}),s.jsxs(a,{children:[s.jsx(_,{disabled:t==="approved"||t==="rejected"||t==="expired",color:"success",variant:"contained",sx:{mr:2},onClick:te,children:"Approve"}),s.jsx(M,{open:ae,onClose:re,title:r?"Are you sure to approve?":"Transaction ID",content:s.jsxs(s.Fragment,{children:[!!x&&s.jsx(Y,{sx:{mb:2},severity:"error",children:x}),!r&&!m&&s.jsx("input",{style:{width:"100%",height:45,padding:10,borderRadius:2,borderColor:"gray"},onChange:S,type:"text"})]}),action:s.jsx(Z,{loading:P,variant:"contained",color:"success",onClick:()=>D("approved"),children:"Approve"})}),s.jsx(_,{disabled:t==="approved"||t==="rejected"||t==="expired",onClick:()=>f(!0),color:"error",variant:"contained",children:"Reject"}),s.jsx(M,{open:ne,onClose:()=>{f(!1),l(""),b("")},title:r?"Are you sure to reject?":"Transaction ID",content:s.jsxs(s.Fragment,{children:[!!x&&s.jsx(Y,{sx:{mb:2},severity:"error",children:x}),!r&&s.jsx("input",{style:{width:"100%",height:45,padding:10,borderRadius:2},onChange:S,type:"text"})]}),action:s.jsx(Z,{loading:P,variant:"contained",color:"error",onClick:()=>D("rejected"),children:"Reject"})})]})]}),pe=s.jsx(X,{children:s.jsx(a,{sx:{p:0,border:"none"},colSpan:8,children:s.jsx(de,{in:se.value,timeout:"auto",unmountOnExit:!0,sx:{bgcolor:"background.neutral"},children:s.jsx(ye,{component:me,sx:{m:1.5}})})})});return s.jsxs(s.Fragment,{children:[ce,pe,s.jsxs(oe,{open:h.open,onClose:h.onClose,arrow:"right-top",sx:{width:140},children:[s.jsxs(H,{onClick:()=>{j.onTrue(),h.onClose()},sx:{color:"error.main"},children:[s.jsx(K,{icon:"solar:trash-bin-trash-bold"}),"Delete"]}),s.jsxs(H,{onClick:()=>{w(),h.onClose()},children:[s.jsx(K,{icon:"solar:eye-bold"}),"View"]})]}),s.jsx(M,{open:j.value,onClose:j.onFalse,title:"Delete",content:"Are you sure want to delete?",action:s.jsx(_,{variant:"contained",color:"error",onClick:ee,children:"Delete"})})]})}he.propTypes={onDeleteRow:y.func,onSelectRow:y.func,onViewRow:y.func,row:y.object,selected:y.bool};export{he as O};
