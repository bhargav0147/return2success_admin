import{cb as ee,j as e,S as l,e as D,L as je,R as M,p as R,I as S,d,o as V,cc as se,J as z,q as r,a as ae,r as j,B as W,bb as Oe,A,T as y,E as ie,$ as Pe,D as Q,ai as Ee,bj as X,y as Te,f as Fe,ci as Ae,G as F,dQ as Ue,cP as te,dR as be,cm as Be,v as ge,dS as ue,C as ve,m as oe,dT as re,k as U,dU as Ge,F as ze,dV as qe}from"./index-27ffd735.js";import{b as We,f as le}from"./format-time-4dc4f2eb.js";import{a as ce}from"./format-number-bf5061ab.js";import{I as q}from"./image-7d02ef11.js";import{s as fe}from"./custom-date-range-picker-5d847698.js";import{L as ne}from"./ListItemText-ff35796a.js";import{P as $e,p as He}from"./Pagination-5cbd8de4.js";import{m as Me,p as Ve}from"./index-0c5ce7cc.js";import{S as Ne}from"./search-not-found-e6059c5f.js";import{A as Y}from"./Autocomplete-b5c308cf.js";import{T as Z}from"./TextField-18c86d14.js";import{I as _e}from"./InputAdornment-babdc070.js";import{D as N}from"./DatePicker-3e2c25a6.js";import{C as I}from"./Chip-a5be7a74.js";import{F as ye}from"./FormControlLabel-4c76a5b9.js";import{C as Ce}from"./Checkbox-ca090919.js";import{C as Ke}from"./custom-breadcrumbs-891ee9b7.js";import{c as de,a as $,h as H,v as pe,u as Je,m as J,C as xe,R as he,n as Qe,F as Xe,p as Ye,q as Ze}from"./rhf-autocomplete-cc9ff921.js";import{o as es}from"./yup-c975ca61.js";import{C as me}from"./CardHeader-8b482d81.js";import{S as ss}from"./Switch-356d0d7d.js";import{L as we}from"./LoadingButton-405ddbf1.js";import{M as as}from"./markdown-61d29bd3.js";import{u as ns,L as is}from"./use-light-box-5fb5e135.js";import{T as ts,a as os}from"./Tabs-a75c564a.js";function ke({tour:s,onView:c,onEdit:t,onDelete:i}){const o=ee(),{id:p,name:w,price:b,images:x,bookers:v,createdAt:h,available:m,priceSale:k,destination:C,ratingNumber:L}=s,O=fe(m.startDate,m.endDate),P=e.jsxs(l,{direction:"row",alignItems:"center",sx:{top:8,right:8,zIndex:9,borderRadius:1,position:"absolute",p:"2px 6px 2px 4px",typography:"subtitle2",bgcolor:"warning.lighter"},children:[e.jsx(d,{icon:"eva:star-fill",sx:{color:"warning.main",mr:.25}})," ",L]}),E=e.jsxs(l,{direction:"row",alignItems:"center",sx:{top:8,left:8,zIndex:9,borderRadius:1,bgcolor:"grey.800",position:"absolute",p:"2px 6px 2px 4px",color:"common.white",typography:"subtitle2"},children:[!!k&&e.jsx(D,{component:"span",sx:{color:"grey.500",mr:.25,textDecoration:"line-through"},children:ce(k)}),ce(b)]}),T=e.jsxs(l,{spacing:.5,direction:"row",sx:{p:a=>a.spacing(1,1,0,1)},children:[e.jsxs(l,{flexGrow:1,sx:{position:"relative"},children:[E,P,e.jsx(q,{alt:x[0],src:x[0],sx:{borderRadius:1,height:164,width:1}})]}),e.jsxs(l,{spacing:.5,children:[e.jsx(q,{alt:x[1],src:x[1],ratio:"1/1",sx:{borderRadius:1,width:80}}),e.jsx(q,{alt:x[2],src:x[2],ratio:"1/1",sx:{borderRadius:1,width:80}})]})]}),g=e.jsx(ne,{sx:{p:a=>a.spacing(2.5,2.5,2,2.5)},primary:`Posted date: ${We(h)}`,secondary:e.jsx(je,{component:M,href:R.dashboard.tour.details(p),color:"inherit",children:w}),primaryTypographyProps:{typography:"caption",color:"text.disabled"},secondaryTypographyProps:{mt:1,noWrap:!0,component:"span",color:"text.primary",typography:"subtitle1"}}),B=e.jsxs(l,{spacing:1.5,sx:{position:"relative",p:a=>a.spacing(0,2.5,2.5,2.5)},children:[e.jsx(S,{onClick:o.onOpen,sx:{position:"absolute",bottom:20,right:8},children:e.jsx(d,{icon:"eva:more-vertical-fill"})}),[{label:C,icon:e.jsx(d,{icon:"mingcute:location-fill",sx:{color:"error.main"}})},{label:O,icon:e.jsx(d,{icon:"solar:clock-circle-bold",sx:{color:"info.main"}})},{label:`${v.length} Booked`,icon:e.jsx(d,{icon:"solar:users-group-rounded-bold",sx:{color:"primary.main"}})}].map(a=>e.jsxs(l,{spacing:1,direction:"row",alignItems:"center",sx:{typography:"body2"},children:[a.icon,a.label]},a.label))]});return e.jsxs(e.Fragment,{children:[e.jsxs(V,{children:[T,g,B]}),e.jsxs(se,{open:o.open,onClose:o.onClose,arrow:"right-top",sx:{width:140},children:[e.jsxs(z,{onClick:()=>{o.onClose(),c()},children:[e.jsx(d,{icon:"solar:eye-bold"}),"View"]}),e.jsxs(z,{onClick:()=>{o.onClose(),t()},children:[e.jsx(d,{icon:"solar:pen-bold"}),"Edit"]}),e.jsxs(z,{onClick:()=>{o.onClose(),i()},sx:{color:"error.main"},children:[e.jsx(d,{icon:"solar:trash-bin-trash-bold"}),"Delete"]})]})]})}ke.propTypes={onDelete:r.func,onEdit:r.func,onView:r.func,tour:r.object};function rs({tours:s}){const c=ae(),t=j.useCallback(p=>{c.push(R.dashboard.tour.details(p))},[c]),i=j.useCallback(p=>{c.push(R.dashboard.tour.edit(p))},[c]),o=j.useCallback(p=>{console.info("DELETE",p)},[]);return e.jsxs(e.Fragment,{children:[e.jsx(D,{gap:3,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)",md:"repeat(3, 1fr)"},children:s.map(p=>e.jsx(ke,{tour:p,onView:()=>t(p.id),onEdit:()=>i(p.id),onDelete:()=>o(p.id)},p.id))}),s.length>8&&e.jsx($e,{count:8,sx:{mt:8,[`& .${He.ul}`]:{justifyContent:"center"}}})]})}rs.propTypes={tours:r.array};function ls({sort:s,onSort:c,sortOptions:t}){const i=ee();return e.jsxs(e.Fragment,{children:[e.jsxs(W,{disableRipple:!0,color:"inherit",onClick:i.onOpen,endIcon:e.jsx(d,{icon:i.open?"eva:arrow-ios-upward-fill":"eva:arrow-ios-downward-fill"}),sx:{fontWeight:"fontWeightSemiBold"},children:["Sort By:",e.jsx(D,{component:"span",sx:{ml:.5,fontWeight:"fontWeightBold",textTransform:"capitalize"},children:s})]}),e.jsx(se,{open:i.open,onClose:i.onClose,sx:{width:140},children:t.map(o=>e.jsx(z,{selected:o.value===s,onClick:()=>{i.onClose(),c(o.value)},children:o.label},o.value))})]})}ls.propTypes={onSort:r.func,sort:r.string,sortOptions:r.array};function cs({query:s,results:c,onSearch:t,hrefItem:i}){const o=ae(),p=b=>{o.push(i(b))},w=b=>{if(s&&b.key==="Enter"){const x=c.filter(v=>v.name===s)[0];p(x.id)}};return e.jsx(Y,{sx:{width:{xs:1,sm:260}},autoHighlight:!0,popupIcon:null,options:c,onInputChange:(b,x)=>t(x),getOptionLabel:b=>b.name,noOptionsText:e.jsx(Ne,{query:s,sx:{bgcolor:"unset"}}),isOptionEqualToValue:(b,x)=>b.id===x.id,slotProps:{popper:{placement:"bottom-start",sx:{minWidth:320}},paper:{sx:{[` .${Oe.option}`]:{pl:.75}}}},renderInput:b=>e.jsx(Z,{...b,placeholder:"Search...",onKeyUp:w,InputProps:{...b.InputProps,startAdornment:e.jsx(_e,{position:"start",children:e.jsx(d,{icon:"eva:search-fill",sx:{ml:1,color:"text.disabled"}})})}}),renderOption:(b,x,{inputValue:v})=>{const h=Me(x.name,v),m=Ve(x.name,h);return j.createElement(D,{component:"li",...b,onClick:()=>p(x.id),key:x.id},e.jsx(A,{alt:x.name,src:x.images[0],variant:"rounded",sx:{width:48,height:48,flexShrink:0,mr:1.5,borderRadius:1}},x.id),e.jsx("div",{children:m.map((k,C)=>e.jsx(y,{component:"span",color:k.highlight?"primary":"textPrimary",sx:{typography:"body2",fontWeight:k.highlight?"fontWeightSemiBold":"fontWeightMedium"},children:k.text},C))},v))}})}cs.propTypes={hrefItem:r.func,onSearch:r.func,query:r.string,results:r.array};function ds({open:s,onOpen:c,onClose:t,filters:i,onFilters:o,canReset:p,onResetFilters:w,destinationOptions:b,tourGuideOptions:x,serviceOptions:v,dateError:h}){const m=j.useCallback(a=>{const n=i.services.includes(a)?i.services.filter(u=>u!==a):[...i.services,a];o("services",n)},[i.services,o]),k=j.useCallback(a=>{o("startDate",a)},[o]),C=j.useCallback(a=>{o("endDate",a)},[o]),L=j.useCallback(a=>{o("destination",a)},[o]),O=j.useCallback(a=>{o("tourGuides",a)},[o]),P=e.jsxs(l,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{py:2,pr:1,pl:2.5},children:[e.jsx(y,{variant:"h6",sx:{flexGrow:1},children:"Filters"}),e.jsx(X,{title:"Reset",children:e.jsx(S,{onClick:w,children:e.jsx(ie,{color:"error",variant:"dot",invisible:!p,children:e.jsx(d,{icon:"solar:restart-bold"})})})}),e.jsx(S,{onClick:t,children:e.jsx(d,{icon:"mingcute:close-line"})})]}),E=e.jsxs(l,{children:[e.jsx(y,{variant:"subtitle2",sx:{mb:1.5},children:"Durations"}),e.jsxs(l,{spacing:2.5,children:[e.jsx(N,{label:"Start date",value:i.startDate,onChange:k}),e.jsx(N,{label:"End date",value:i.endDate,onChange:C,slotProps:{textField:{error:h,helperText:h&&"End date must be later than start date"}}})]})]}),T=e.jsxs(l,{children:[e.jsx(y,{variant:"subtitle2",sx:{mb:1.5},children:"Destination"}),e.jsx(Y,{multiple:!0,disableCloseOnSelect:!0,options:b.map(a=>a.label),getOptionLabel:a=>a,value:i.destination,onChange:(a,n)=>L(n),renderInput:a=>e.jsx(Z,{placeholder:"Select Destination",...a}),renderOption:(a,n)=>{const{code:u,label:f,phone:_}=b.filter(K=>K.label===n)[0];return f?j.createElement("li",{...a,key:f},e.jsx(d,{icon:`circle-flags:${u.toLowerCase()}`,width:28,sx:{mr:1}},f),f," (",u,") +",_):null},renderTags:(a,n)=>a.map((u,f)=>j.createElement(I,{...n({index:f}),key:u,label:u,size:"small",variant:"soft"}))})]}),g=e.jsxs(l,{children:[e.jsx(y,{variant:"subtitle2",sx:{mb:1.5},children:"Tour Guide"}),e.jsx(Y,{multiple:!0,disableCloseOnSelect:!0,options:x,value:i.tourGuides,onChange:(a,n)=>O(n),getOptionLabel:a=>a.name,renderInput:a=>e.jsx(Z,{placeholder:"Select Tour Guides",...a}),renderOption:(a,n)=>j.createElement("li",{...a,key:n.id},e.jsx(A,{alt:n.avatarUrl,src:n.avatarUrl,sx:{width:24,height:24,flexShrink:0,mr:1}},n.id),n.name),renderTags:(a,n)=>a.map((u,f)=>j.createElement(I,{...n({index:f}),key:u.id,size:"small",variant:"soft",label:u.name,avatar:e.jsx(A,{alt:u.name,src:u.avatarUrl})}))})]}),B=e.jsxs(l,{children:[e.jsx(y,{variant:"subtitle2",sx:{mb:1},children:"Services"}),v.map(a=>e.jsx(ye,{control:e.jsx(Ce,{checked:i.services.includes(a),onClick:()=>m(a)}),label:a},a))]});return e.jsxs(e.Fragment,{children:[e.jsx(W,{disableRipple:!0,color:"inherit",endIcon:e.jsx(ie,{color:"error",variant:"dot",invisible:!p,children:e.jsx(d,{icon:"ic:round-filter-list"})}),onClick:c,children:"Filters"}),e.jsxs(Pe,{anchor:"right",open:s,onClose:t,slotProps:{backdrop:{invisible:!0}},PaperProps:{sx:{width:280}},children:[P,e.jsx(Q,{}),e.jsx(Ee,{sx:{px:2.5,py:3},children:e.jsxs(l,{spacing:3,children:[E,T,g,B]})})]})]})}ds.propTypes={canReset:r.bool,dateError:r.bool,destinationOptions:r.array,filters:r.object,onClose:r.func,onFilters:r.func,onOpen:r.func,onResetFilters:r.func,open:r.bool,serviceOptions:r.array,tourGuideOptions:r.array};function ps({filters:s,onFilters:c,canReset:t,onResetFilters:i,results:o,...p}){const w=fe(s.startDate,s.endDate),b=m=>{const k=s.services.filter(C=>C!==m);c("services",k)},x=()=>{c("startDate",null),c("endDate",null)},v=m=>{const k=s.tourGuides.filter(C=>C.name!==m.name);c("tourGuides",k)},h=m=>{const k=s.destination.filter(C=>C!==m);c("destination",k)};return e.jsxs(l,{spacing:1.5,...p,children:[e.jsxs(D,{sx:{typography:"body2"},children:[e.jsx("strong",{children:o}),e.jsx(D,{component:"span",sx:{color:"text.secondary",ml:.25},children:"results found"})]}),e.jsxs(l,{flexGrow:1,spacing:1,direction:"row",flexWrap:"wrap",alignItems:"center",children:[s.startDate&&s.endDate&&e.jsx(G,{label:"Available:",children:e.jsx(I,{size:"small",label:w,onDelete:x})}),!!s.services.length&&e.jsx(G,{label:"Services:",children:s.services.map(m=>e.jsx(I,{label:m,size:"small",onDelete:()=>b(m)},m))}),!!s.tourGuides.length&&e.jsx(G,{label:"Tour guide:",children:s.tourGuides.map(m=>e.jsx(I,{size:"small",avatar:e.jsx(A,{alt:m.name,src:m.avatarUrl}),label:m.name,onDelete:()=>v(m)},m.id))}),!!s.destination.length&&e.jsx(G,{label:"Destination:",children:s.destination.map(m=>e.jsx(I,{label:m,size:"small",onDelete:()=>h(m)},m))}),t&&e.jsx(W,{color:"error",onClick:i,startIcon:e.jsx(d,{icon:"solar:trash-bin-trash-bold"}),children:"Clear"})]})]})}ps.propTypes={canReset:r.bool,filters:r.object,onFilters:r.func,onResetFilters:r.func,results:r.number};function G({label:s,children:c,sx:t,...i}){return e.jsxs(l,{component:Te,variant:"outlined",spacing:1,direction:"row",sx:{p:1,borderRadius:1,overflow:"hidden",borderStyle:"dashed",...t},...i,children:[e.jsx(D,{component:"span",sx:{typography:"subtitle2"},children:s}),e.jsx(l,{spacing:1,direction:"row",flexWrap:"wrap",children:c})]})}G.propTypes={children:r.node,label:r.string,sx:r.object};function De({currentTour:s}){const c=ae(),t=Fe("up","md"),{enqueueSnackbar:i}=Ae(),o=de().shape({name:$().required("Name is required"),content:$().required("Content is required"),images:H().min(1,"Images is required"),tourGuides:H().min(1,"Must have at least 1 guide"),durations:$().required("Duration is required"),tags:H().min(2,"Must have at least 2 tags"),services:H().min(2,"Must have at least 2 services"),destination:$().required("Destination is required"),available:de().shape({startDate:pe().nullable().required("Start date is required"),endDate:pe().required("End date is required").test("date-min","End date must be later than start date",(a,{parent:n})=>a.getTime()>n.startDate.getTime())})}),p=j.useMemo(()=>({name:(s==null?void 0:s.name)||"",content:(s==null?void 0:s.content)||"",images:(s==null?void 0:s.images)||[],tourGuides:(s==null?void 0:s.tourGuides)||[],tags:(s==null?void 0:s.tags)||[],durations:(s==null?void 0:s.durations)||"",destination:(s==null?void 0:s.destination)||"",services:(s==null?void 0:s.services)||[],available:{startDate:(s==null?void 0:s.available.startDate)||null,endDate:(s==null?void 0:s.available.endDate)||null}}),[s]),w=Je({resolver:es(o),defaultValues:p}),{watch:b,reset:x,control:v,setValue:h,handleSubmit:m,formState:{isSubmitting:k}}=w,C=b();j.useEffect(()=>{s&&x(p)},[s,p,x]);const L=m(async a=>{try{await new Promise(n=>setTimeout(n,500)),x(),i(s?"Update success!":"Create success!"),c.push(R.dashboard.tour.root),console.info("DATA",a)}catch(n){console.error(n)}}),O=j.useCallback(a=>{const n=C.images||[],u=a.map(f=>Object.assign(f,{preview:URL.createObjectURL(f)}));h("images",[...n,...u],{shouldValidate:!0})},[h,C.images]),P=j.useCallback(a=>{var u;const n=C.images&&((u=C.images)==null?void 0:u.filter(f=>f!==a));h("images",n)},[h,C.images]),E=j.useCallback(()=>{h("images",[])},[h]),T=e.jsxs(e.Fragment,{children:[t&&e.jsxs(F,{md:4,children:[e.jsx(y,{variant:"h6",sx:{mb:.5},children:"Details"}),e.jsx(y,{variant:"body2",sx:{color:"text.secondary"},children:"Title, short description, image..."})]}),e.jsx(F,{xs:12,md:8,children:e.jsxs(V,{children:[!t&&e.jsx(me,{title:"Details"}),e.jsxs(l,{spacing:3,sx:{p:3},children:[e.jsxs(l,{spacing:1.5,children:[e.jsx(y,{variant:"subtitle2",children:"Name"}),e.jsx(he,{name:"name",placeholder:"Ex: Adventure Seekers Expedition..."})]}),e.jsxs(l,{spacing:1.5,children:[e.jsx(y,{variant:"subtitle2",children:"Content"}),e.jsx(Ye,{simple:!0,name:"content"})]}),e.jsxs(l,{spacing:1.5,children:[e.jsx(y,{variant:"subtitle2",children:"Images"}),e.jsx(Ze,{multiple:!0,thumbnail:!0,name:"images",maxSize:3145728,onDrop:O,onRemove:P,onRemoveAll:E,onUpload:()=>console.info("ON UPLOAD")})]})]})]})})]}),g=e.jsxs(e.Fragment,{children:[t&&e.jsxs(F,{md:4,children:[e.jsx(y,{variant:"h6",sx:{mb:.5},children:"Properties"}),e.jsx(y,{variant:"body2",sx:{color:"text.secondary"},children:"Additional functions and attributes..."})]}),e.jsx(F,{xs:12,md:8,children:e.jsxs(V,{children:[!t&&e.jsx(me,{title:"Properties"}),e.jsxs(l,{spacing:3,sx:{p:3},children:[e.jsxs(l,{children:[e.jsx(y,{variant:"subtitle2",sx:{mb:1.5},children:"Tour Guide"}),e.jsx(J,{multiple:!0,name:"tourGuides",placeholder:"+ Tour Guides",disableCloseOnSelect:!0,options:Ue,getOptionLabel:a=>a.name,isOptionEqualToValue:(a,n)=>a.id===n.id,renderOption:(a,n)=>j.createElement("li",{...a,key:n.id},e.jsx(A,{alt:n.avatarUrl,src:n.avatarUrl,sx:{width:24,height:24,flexShrink:0,mr:1}},n.id),n.name),renderTags:(a,n)=>a.map((u,f)=>j.createElement(I,{...n({index:f}),key:u.id,size:"small",variant:"soft",label:u.name,avatar:e.jsx(A,{alt:u.name,src:u.avatarUrl})}))})]}),e.jsxs(l,{spacing:1.5,children:[e.jsx(y,{variant:"subtitle2",children:"Available"}),e.jsxs(l,{direction:{xs:"column",md:"row"},spacing:2,children:[e.jsx(xe,{name:"available.startDate",control:v,render:({field:a,fieldState:{error:n}})=>e.jsx(N,{...a,format:"dd/MM/yyyy",slotProps:{textField:{fullWidth:!0,error:!!n,helperText:n==null?void 0:n.message}}})}),e.jsx(xe,{name:"available.endDate",control:v,render:({field:a,fieldState:{error:n}})=>e.jsx(N,{...a,format:"dd/MM/yyyy",slotProps:{textField:{fullWidth:!0,error:!!n,helperText:n==null?void 0:n.message}}})})]})]}),e.jsxs(l,{spacing:1.5,children:[e.jsx(y,{variant:"subtitle2",children:"Duration"}),e.jsx(he,{name:"durations",placeholder:"Ex: 2 days, 4 days 3 nights..."})]}),e.jsxs(l,{spacing:1.5,children:[e.jsx(y,{variant:"subtitle2",children:"Destination"}),e.jsx(J,{name:"destination",placeholder:"+ Destination",options:te.map(a=>a.label),getOptionLabel:a=>a,renderOption:(a,n)=>{const{code:u,label:f,phone:_}=te.filter(K=>K.label===n)[0];return f?j.createElement("li",{...a,key:f},e.jsx(d,{icon:`circle-flags:${u.toLowerCase()}`,width:28,sx:{mr:1}},f),f," (",u,") +",_):null}})]}),e.jsxs(l,{spacing:1,children:[e.jsx(y,{variant:"subtitle2",children:"Services"}),e.jsx(Qe,{name:"services",options:be,sx:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)"}})]}),e.jsxs(l,{spacing:1.5,children:[e.jsx(y,{variant:"subtitle2",children:"Tags"}),e.jsx(J,{name:"tags",placeholder:"+ Tags",multiple:!0,freeSolo:!0,options:Be.map(a=>a),getOptionLabel:a=>a,renderOption:(a,n)=>j.createElement("li",{...a,key:n},n),renderTags:(a,n)=>a.map((u,f)=>j.createElement(I,{...n({index:f}),key:u,label:u,size:"small",color:"info",variant:"soft"}))})]})]})]})})]}),B=e.jsxs(e.Fragment,{children:[t&&e.jsx(F,{md:4}),e.jsxs(F,{xs:12,md:8,sx:{display:"flex",alignItems:"center"},children:[e.jsx(ye,{control:e.jsx(ss,{defaultChecked:!0}),label:"Publish",sx:{flexGrow:1,pl:3}}),e.jsx(we,{type:"submit",variant:"contained",size:"large",loading:k,sx:{ml:2},children:s?"Save Changes":"Create Tour"})]})]});return e.jsx(Xe,{methods:w,onSubmit:L,children:e.jsxs(F,{container:!0,spacing:3,children:[T,g,B]})})}De.propTypes={currentTour:r.object};function xs({id:s}){const c=ge(),t=ue.find(i=>i.id===s);return e.jsxs(ve,{maxWidth:c.themeStretch?!1:"lg",children:[e.jsx(Ke,{heading:"Edit",links:[{name:"Dashboard",href:R.dashboard.root},{name:"Tour",href:R.dashboard.tour.root},{name:t==null?void 0:t.name}],sx:{mb:{xs:3,md:5}}}),e.jsx(De,{currentTour:t})]})}xs.propTypes={id:r.string};function Se({publish:s,backLink:c,editLink:t,liveLink:i,publishOptions:o,onChangePublish:p,sx:w,...b}){const x=ee();return e.jsxs(e.Fragment,{children:[e.jsxs(l,{spacing:1.5,direction:"row",sx:{mb:{xs:3,md:5},...w},...b,children:[e.jsx(W,{component:M,href:c,startIcon:e.jsx(d,{icon:"eva:arrow-ios-back-fill",width:16}),children:"Back"}),e.jsx(D,{sx:{flexGrow:1}}),s==="published"&&e.jsx(X,{title:"Go Live",children:e.jsx(S,{component:M,href:i,children:e.jsx(d,{icon:"eva:external-link-fill"})})}),e.jsx(X,{title:"Edit",children:e.jsx(S,{component:M,href:t,children:e.jsx(d,{icon:"solar:pen-bold"})})}),e.jsx(we,{color:"inherit",variant:"contained",loading:!s,loadingIndicator:"Loading…",endIcon:e.jsx(d,{icon:"eva:arrow-ios-downward-fill"}),onClick:x.onOpen,sx:{textTransform:"capitalize"},children:s})]}),e.jsx(se,{open:x.open,onClose:x.onClose,arrow:"top-right",sx:{width:140},children:o.map(v=>e.jsxs(z,{selected:v.value===s,onClick:()=>{x.onClose(),p(v.value)},children:[v.value==="published"&&e.jsx(d,{icon:"eva:cloud-upload-fill"}),v.value==="draft"&&e.jsx(d,{icon:"solar:file-text-bold"}),v.label]},v.value))})]})}Se.propTypes={backLink:r.string,editLink:r.string,liveLink:r.string,onChangePublish:r.func,publish:r.string,publishOptions:r.array,sx:r.object};function Ie({tour:s}){const{name:c,images:t,content:i,services:o,tourGuides:p,available:w,durations:b,destination:x,ratingNumber:v}=s,h=t.map(g=>({src:g})),{selected:m,open:k,onOpen:C,onClose:L}=ns(h),O=e.jsxs(e.Fragment,{children:[e.jsxs(D,{gap:1,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",md:"repeat(2, 1fr)"},sx:{mb:{xs:3,md:5}},children:[e.jsx(oe.div,{whileHover:"hover",variants:{hover:{opacity:.8}},transition:re(),children:e.jsx(q,{alt:h[0].src,src:h[0].src,ratio:"1/1",onClick:()=>C(h[0].src),sx:{borderRadius:2,cursor:"pointer"}})},h[0].src),e.jsx(D,{gap:1,display:"grid",gridTemplateColumns:"repeat(2, 1fr)",children:h.slice(1,5).map(g=>e.jsx(oe.div,{whileHover:"hover",variants:{hover:{opacity:.8}},transition:re(),children:e.jsx(q,{alt:g.src,src:g.src,ratio:"1/1",onClick:()=>C(g.src),sx:{borderRadius:2,cursor:"pointer"}})},g.src))})]}),e.jsx(is,{index:m,slides:h,open:k,close:L})]}),P=e.jsxs(e.Fragment,{children:[e.jsxs(l,{direction:"row",sx:{mb:3},children:[e.jsx(y,{variant:"h4",sx:{flexGrow:1},children:c}),e.jsx(S,{children:e.jsx(d,{icon:"solar:share-bold"})}),e.jsx(Ce,{defaultChecked:!0,color:"error",icon:e.jsx(d,{icon:"solar:heart-outline"}),checkedIcon:e.jsx(d,{icon:"solar:heart-bold"})})]}),e.jsxs(l,{spacing:3,direction:"row",flexWrap:"wrap",alignItems:"center",children:[e.jsxs(l,{direction:"row",alignItems:"center",spacing:.5,sx:{typography:"body2"},children:[e.jsx(d,{icon:"eva:star-fill",sx:{color:"warning.main"}}),e.jsx(D,{component:"span",sx:{typography:"subtitle2"},children:v}),e.jsx(je,{sx:{color:"text.secondary"},children:"(234 reviews)"})]}),e.jsxs(l,{direction:"row",alignItems:"center",spacing:.5,sx:{typography:"body2"},children:[e.jsx(d,{icon:"mingcute:location-fill",sx:{color:"error.main"}}),x]}),e.jsxs(l,{direction:"row",alignItems:"center",spacing:.5,sx:{typography:"subtitle2"},children:[e.jsx(d,{icon:"solar:flag-bold",sx:{color:"info.main"}}),e.jsx(D,{component:"span",sx:{typography:"body2",color:"text.secondary"},children:"Guide by"}),p.map(g=>g.name).join(", ")]})]})]}),E=e.jsx(D,{gap:3,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",md:"repeat(2, 1fr)"},children:[{label:"Available",value:`${le(w.startDate)} - ${le(w.endDate)}`,icon:e.jsx(d,{icon:"solar:calendar-date-bold"})},{label:"Contact name",value:p.map(g=>g.phoneNumber).join(", "),icon:e.jsx(d,{icon:"solar:user-rounded-bold"})},{label:"Durations",value:b,icon:e.jsx(d,{icon:"solar:clock-circle-bold"})},{label:"Contact phone",value:p.map(g=>g.name).join(", "),icon:e.jsx(d,{icon:"solar:phone-bold"})}].map(g=>e.jsxs(l,{spacing:1.5,direction:"row",children:[g.icon,e.jsx(ne,{primary:g.label,secondary:g.value,primaryTypographyProps:{typography:"body2",color:"text.secondary",mb:.5},secondaryTypographyProps:{typography:"subtitle2",color:"text.primary",component:"span"}})]},g.label))}),T=e.jsxs(e.Fragment,{children:[e.jsx(as,{children:i}),e.jsxs(l,{spacing:2,children:[e.jsx(y,{variant:"h6",children:" Services"}),e.jsx(D,{rowGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",md:"repeat(2, 1fr)"},children:be.map(g=>e.jsxs(l,{spacing:1,direction:"row",alignItems:"center",sx:{...o.includes(g.label)&&{color:"text.disabled"}},children:[e.jsx(d,{icon:"eva:checkmark-circle-2-outline",sx:{color:"primary.main",...o.includes(g.label)&&{color:"text.disabled"}}}),g.label]},g.label))})]})]});return e.jsxs(e.Fragment,{children:[O,e.jsxs(l,{sx:{maxWidth:720,mx:"auto"},children:[P,e.jsx(Q,{sx:{borderStyle:"dashed",my:5}}),E,e.jsx(Q,{sx:{borderStyle:"dashed",my:5}}),T]})]})}Ie.propTypes={tour:r.object};function Re({bookers:s}){const[c,t]=j.useState([]),i=j.useCallback(o=>{const p=c.includes(o)?c.filter(w=>w!==o):[...c,o];t(p)},[c]);return e.jsx(D,{gap:3,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)",md:"repeat(3, 1fr)"},children:s.map(o=>e.jsx(Le,{booker:o,selected:c.includes(o.id),onSelected:()=>i(o.id)},o.id))})}Re.propTypes={bookers:r.array};function Le({booker:s,selected:c,onSelected:t}){return e.jsxs(l,{component:V,direction:"row",spacing:2,sx:{p:3},children:[e.jsx(A,{alt:s.name,src:s.avatarUrl,sx:{width:48,height:48}}),e.jsxs(l,{spacing:2,flexGrow:1,children:[e.jsx(ne,{primary:s.name,secondary:e.jsxs(l,{direction:"row",alignItems:"center",spacing:.5,children:[e.jsx(d,{icon:"solar:users-group-rounded-bold",width:16}),s.guests," guests"]}),secondaryTypographyProps:{mt:.5,component:"span",typography:"caption",color:"text.disabled"}}),e.jsxs(l,{spacing:1,direction:"row",children:[e.jsx(S,{size:"small",color:"error",sx:{borderRadius:1,bgcolor:i=>U(i.palette.error.main,.08),"&:hover":{bgcolor:i=>U(i.palette.error.main,.16)}},children:e.jsx(d,{width:18,icon:"solar:phone-bold"})}),e.jsx(S,{size:"small",color:"info",sx:{borderRadius:1,bgcolor:i=>U(i.palette.info.main,.08),"&:hover":{bgcolor:i=>U(i.palette.info.main,.16)}},children:e.jsx(d,{width:18,icon:"solar:chat-round-dots-bold"})}),e.jsx(S,{size:"small",color:"primary",sx:{borderRadius:1,bgcolor:i=>U(i.palette.primary.main,.08),"&:hover":{bgcolor:i=>U(i.palette.primary.main,.16)}},children:e.jsx(d,{width:18,icon:"fluent:mail-24-filled"})})]})]}),e.jsx(W,{size:"small",variant:c?"text":"outlined",color:c?"success":"inherit",startIcon:c?e.jsx(d,{width:18,icon:"eva:checkmark-fill",sx:{mr:-.75}}):null,onClick:t,children:c?"Approved":"Approve"})]},s.id)}Le.propTypes={booker:r.object,onSelected:r.func,selected:r.bool};function hs({id:s}){const c=ge(),t=ue.filter(h=>h.id===s)[0],[i,o]=j.useState(t==null?void 0:t.publish),[p,w]=j.useState("content"),b=j.useCallback((h,m)=>{w(m)},[]),x=j.useCallback(h=>{o(h)},[]),v=e.jsx(ts,{value:p,onChange:b,sx:{mb:{xs:3,md:5}},children:Ge.map(h=>e.jsx(os,{iconPosition:"end",value:h.value,label:h.label,icon:h.value==="bookers"?e.jsx(ze,{variant:"filled",children:t==null?void 0:t.bookers.length}):""},h.value))});return e.jsxs(ve,{maxWidth:c.themeStretch?!1:"lg",children:[e.jsx(Se,{backLink:R.dashboard.tour.root,editLink:R.dashboard.tour.edit(`${t==null?void 0:t.id}`),liveLink:"#",publish:i||"",onChangePublish:x,publishOptions:qe}),v,p==="content"&&e.jsx(Ie,{tour:t}),p==="bookers"&&e.jsx(Re,{bookers:t==null?void 0:t.bookers})]})}hs.propTypes={id:r.string};export{hs as T,cs as a,ds as b,ls as c,ps as d,rs as e,De as f,xs as g};
