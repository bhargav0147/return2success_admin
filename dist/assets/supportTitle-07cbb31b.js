import{c as O,cb as le,r as o,j as e,cc as ie,J as H,d as k,B as x,q as D,cW as W,d7 as Q,v as ce,a as de,d3 as ue,p as L,d4 as pe,C as me,o as ge,ai as he,W as xe}from"./index-27ffd735.js";import{a as v}from"./format-time-4dc4f2eb.js";import{C as Ce}from"./custom-breadcrumbs-891ee9b7.js";import{g as fe,c as je}from"./utils-b5337f6b.js";import{u as be}from"./use-table-ad19f892.js";import{T as _,c as we,d as ye,b as Pe,e as Se}from"./table-pagination-custom-61c144d7.js";import{C as De}from"./confirm-dialog-31af3c64.js";import{T as b}from"./TablePagination-488334e4.js";import{D as K}from"./Dialog-5a3d7487.js";import{D as X}from"./DialogTitle-eb11eb3a.js";import{D as Y}from"./DialogContent-90bef667.js";import{D as Z}from"./DialogContentText-38b36ed8.js";import{T as V}from"./TextField-18c86d14.js";import{D as ee}from"./DialogActions-29076f9a.js";import{B as G}from"./Box-531386b9.js";import{S as Re}from"./Stack-81f38202.js";import{I as Te}from"./InputAdornment-babdc070.js";import{T as ve,a as ke,b as Fe}from"./TableContainer-f8ac8b22.js";import"./index-e5978b8b.js";import"./empty-content-67ee3c7b.js";import"./Checkbox-ca090919.js";import"./SwitchBase-cff1fcb3.js";import"./useFormControl-146f88ba.js";import"./FormControlLabel-4c76a5b9.js";import"./formControlState-a1fb9590.js";import"./Switch-356d0d7d.js";import"./KeyboardArrowRight-44da873a.js";import"./FirstPage-6da56183.js";import"./Select-7c65bb90.js";import"./Menu-02e5c653.js";import"./List-1e1da31b.js";import"./utils-a73c94d0.js";import"./InputBase-894de89e.js";import"./dialogTitleClasses-80e3b880.js";import"./FormControl-26894946.js";import"./FormLabel-fae9cf0f.js";function te({idex:t,row:p,selected:w,reloadFn:c,onViewRow:m,onSelectRow:n,onDeleteRow:g,isRegister:h,isPromotion:y,getAllCategory:a}){const{id:d,type:C,title:l}=p,u=O();O();const f=le(),[U,R]=o.useState(""),[F,T]=o.useState(!1);o.useState(!1);const[q,$]=o.useState(""),P=()=>{T(!0)},[j,A]=o.useState(),M=async()=>{try{(await W.put(`/api/admin/businesstypes/${d}`,{categorytype:j})).status===200&&(a(),S(),Q("Category Updated Successfully",{variant:"success"}))}catch(i){console.error(i)}},E=i=>{A(i.target.value),console.log(j)},S=()=>{T(!1),R(""),$("")};o.useEffect(()=>{console.log("id====>",p)},[p]);const I=e.jsxs(_,{hover:!0,children:[e.jsx(b,{children:t}),e.jsx(b,{align:"center",children:l}),e.jsxs(b,{sx:{display:"flex",justifyContent:"center"},children:[e.jsx(x,{disabled:status==="approved"||status==="rejected"||status==="expired",color:"success",variant:"contained",onClick:()=>{P()},children:"Edit"}),e.jsxs(K,{open:F,onClose:S,children:[e.jsx(X,{id:"alert-dialog-title",sx:{width:"500px"},children:"Edit Category"}),e.jsx(Y,{sx:{px:3},children:e.jsx(Z,{id:"alert-dialog-description",children:e.jsx(V,{id:"outlined-basic",fullWidth:!0,label:"Category Name",variant:"outlined",sx:{mt:1},defaultValue:C,onChange:E})})}),e.jsxs(ee,{sx:{pb:2},children:[e.jsx(x,{onClick:S,variant:"contained",autoFocus:!0,children:"Cancel"}),e.jsx(x,{onClick:()=>M(),variant:"contained",children:"Submit"})]})]})]})]});return e.jsxs(e.Fragment,{children:[I,e.jsxs(ie,{open:f.open,onClose:f.onClose,arrow:"right-top",sx:{width:140},children:[e.jsxs(H,{onClick:()=>{u.onTrue(),f.onClose()},sx:{color:"error.main"},children:[e.jsx(k,{icon:"solar:trash-bin-trash-bold"}),"Delete"]}),e.jsxs(H,{onClick:()=>{m(),f.onClose()},children:[e.jsx(k,{icon:"solar:eye-bold"}),"View"]})]}),e.jsx(De,{open:u.value,onClose:u.onFalse,title:"Delete",content:"Are you sure want to delete?",action:e.jsx(x,{variant:"contained",color:"error",onClick:g,children:"Delete"})})]})}te.propTypes={onDeleteRow:D.func,onSelectRow:D.func,onViewRow:D.func,row:D.object,selected:D.bool};const J={name:"",status:"all",startDate:null,endDate:null};function Ae(){const t=be({defaultOrderBy:"orderNumber"}),p=ce(),w=de();O();const[c,m]=o.useState(ue),[n,g]=o.useState(J),[h,y]=o.useState(""),[a,d]=o.useState(""),C=n.startDate&&n.endDate?n.startDate.getTime()>n.endDate.getTime():!1,l=Ee({inputData:c,comparator:fe(t.order,t.orderBy),filters:n,dateError:C}),u=l.slice(t.page*t.rowsPerPage,t.page*t.rowsPerPage+t.rowsPerPage),f=t.dense?52:72,U=!!n.name||n.status!=="all"||!!n.startDate&&!!n.endDate,R=o.useCallback((s,r)=>{t.onResetPage(),g(B=>({...B,[s]:r}))},[t]),F=o.useCallback(s=>{const r=c.filter(B=>B.id!==s);m(r),t.onUpdatePageDeleteRow(u.length)},[u.length,t,c]);o.useCallback(()=>{const s=c.filter(r=>!t.selected.includes(r.id));m(s),t.onUpdatePageDeleteRows({totalRows:c.length,totalRowsInPage:u.length,totalRowsFiltered:l.length})},[l.length,u.length,t,c]),o.useCallback(()=>{g(J)},[]);const T=o.useCallback(s=>{w.push(L.dashboard.order.details(s))},[w]);o.useCallback((s,r)=>{R("status",r)},[R]);const q=pe(),P=new URLSearchParams(q.search).get("page"),[j,A]=o.useState([]),[M,E]=o.useState(Number(P)||1),[S,I]=o.useState(1);o.useEffect(()=>{E(Number(P))},[P]),o.useState(t.rowsPerPage);const i=o.useCallback(async()=>{var s;try{const r=await W.get(`/api/admin/support?limit=${t.rowsPerPage}&page=${t.page+1}&search=${h}`);A(r.data.data),I((s=r==null?void 0:r.data)==null?void 0:s.total)}catch(r){console.error(r)}},[t.rowsPerPage,t.page,h]),se=async()=>{try{(await W.post("/api/admin/support",{title:a})).status===200&&(i(),N(),Q("Category Updated Successfully",{variant:"success"}))}catch(s){console.error(s)}},oe=!l.length&&U||!l.length;o.useEffect(()=>{i(),console.log("pagelimite===>",t.rowsPerPage)},[i,t.rowsPerPage]),o.useState("all");const[ae,z]=o.useState(!1),re=()=>{z(!0)},N=()=>{z(!1),d("")},ne=s=>{d(s.target.value)};return e.jsx(e.Fragment,{children:e.jsxs(me,{maxWidth:p.themeStretch?!1:"lg",children:[e.jsxs(G,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(Ce,{heading:"Support",links:[{name:"Dashboard",href:L.dashboard.root},{name:"Support",href:L.dashboard.support},{name:"Add"}],sx:{mb:{xs:3,md:5}}}),e.jsxs(G,{children:[e.jsx(x,{variant:"contained",onClick:re,startIcon:e.jsx(k,{icon:"mingcute:add-line"}),children:"Add Title"}),e.jsxs(K,{open:ae,onClose:N,children:[e.jsx(X,{id:"alert-dialog-title",sx:{width:"500px"},children:"Add Category"}),e.jsx(Y,{sx:{px:3},children:e.jsx(Z,{id:"alert-dialog-description",children:e.jsx(V,{id:"outlined-basic",fullWidth:!0,label:"Category Name",variant:"outlined",sx:{mt:1},value:a,onChange:ne})})}),e.jsxs(ee,{sx:{pb:2},children:[e.jsx(x,{onClick:N,variant:"contained",autoFocus:!0,children:"Cancel"}),e.jsx(x,{onClick:se,variant:"contained",children:"Submit"})]})]})]})]}),e.jsx(Re,{direction:"row",alignItems:"center",spacing:2,flexGrow:1,sx:{width:1,mb:5},children:e.jsx(V,{fullWidth:!0,placeholder:"Search...",onChange:s=>{y(s.target.value),console.log(h)},InputProps:{startAdornment:e.jsx(Te,{position:"start",children:e.jsx(k,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}})}),e.jsxs(ge,{children:[e.jsx(ve,{sx:{position:"relative",overflow:"unset"},children:e.jsx(he,{children:e.jsxs(ke,{size:t.dense?"small":"medium",sx:{minWidth:"100%"},children:[e.jsx(we,{children:e.jsxs(_,{children:[e.jsx(b,{sx:{width:"10%"},children:"Sr no."}),e.jsx(b,{align:"center",children:"Title"}),e.jsx(b,{sx:{display:"flex",justifyContent:"center"},children:"Action"})]})}),e.jsxs(Fe,{children:[j==null?void 0:j.map((s,r)=>e.jsx(te,{idex:r+1,getAllCategory:i,row:s,selected:t.selected.includes(s.id),onSelectRow:()=>t.onSelectRow(s.id),onDeleteRow:()=>F(s.id),onViewRow:()=>T(s.id),reloadFn:i},s.id)),(l==null?void 0:l.length)>0&&e.jsx(ye,{height:f,emptyRows:je(t.page,t.rowsPerPage,l.length)}),e.jsx(Pe,{notFound:oe})]})]})})}),e.jsx(Se,{count:S,page:t.page,rowsPerPage:t.rowsPerPage,onPageChange:t.onChangePage,onRowsPerPageChange:t.onChangeRowsPerPage,dense:t.dense,onChangeDense:t.onChangeDense})]})]})})}function Ee({inputData:t,comparator:p,filters:w,dateError:c}){const{status:m,name:n,startDate:g,endDate:h}=w,y=t.map((a,d)=>[a,d]);return y.sort((a,d)=>{const C=p(a[0],d[0]);return C!==0?C:a[1]-d[1]}),t=y.map(a=>a[0]),n&&(t=t.filter(a=>a.orderNumber.toLowerCase().indexOf(n.toLowerCase())!==-1||a.customer.name.toLowerCase().indexOf(n.toLowerCase())!==-1||a.customer.email.toLowerCase().indexOf(n.toLowerCase())!==-1)),m!=="all"&&(t=t.filter(a=>a.status===m)),c||g&&h&&(t=t.filter(a=>v(a.createdAt)>=v(g)&&v(a.createdAt)<=v(h))),t}function ht(){return e.jsxs(e.Fragment,{children:[e.jsx(xe,{children:e.jsx("title",{children:" Dashboard: Support title"})}),e.jsx(Ae,{})]})}export{ht as default};
