import{j as e,S as i,y as S,T as p,e as C,F as A,q as t,cP as v,r as g,d as T,B as q,a0 as L,cQ as N}from"./index-27ffd735.js";import{c as D,a as c,j as I,u as $,F as k,r as H,R as y,m as R,t as B}from"./rhf-autocomplete-cc9ff921.js";import{o as O}from"./yup-c975ca61.js";import{D as F}from"./Dialog-5a3d7487.js";import{D as P}from"./DialogTitle-eb11eb3a.js";import{D as G}from"./DialogContent-90bef667.js";import{D as z}from"./DialogActions-29076f9a.js";import{L as W}from"./LoadingButton-405ddbf1.js";import{S as E}from"./search-not-found-e6059c5f.js";import{T as Z}from"./TextField-18c86d14.js";import{I as Q}from"./InputAdornment-babdc070.js";function U({address:a,action:o,sx:n,...f}){const{name:d,fullAddress:m,addressType:u,phoneNumber:l,primary:x}=a;return e.jsxs(i,{component:S,spacing:2,alignItems:{md:"flex-end"},direction:{xs:"column",md:"row"},sx:{position:"relative",...n},...f,children:[e.jsxs(i,{flexGrow:1,spacing:1,children:[e.jsxs(i,{direction:"row",alignItems:"center",children:[e.jsxs(p,{variant:"subtitle2",children:[d,e.jsxs(C,{component:"span",sx:{ml:.5,typography:"body2",color:"text.secondary"},children:["(",u,")"]})]}),x&&e.jsx(A,{color:"info",sx:{ml:1},children:"Default"})]}),e.jsx(p,{variant:"body2",sx:{color:"text.secondary"},children:m}),e.jsx(p,{variant:"body2",sx:{color:"text.secondary"},children:l})]}),o&&o]})}U.propTypes={action:t.node,address:t.object,sx:t.object};function V({open:a,onClose:o,onCreate:n}){const f=D().shape({name:c().required("Fullname is required"),phoneNumber:c().required("Phone number is required"),address:c().required("Address is required"),city:c().required("City is required"),state:c().required("State is required"),country:c().required("Country is required"),zipCode:c().required("Zip code is required"),addressType:c(),primary:I()}),d={name:"",city:"",state:"",address:"",zipCode:"",primary:!0,phoneNumber:"",addressType:"Home",country:""},m=$({resolver:O(f),defaultValues:d}),{handleSubmit:u,formState:{isSubmitting:l}}=m,x=u(async r=>{try{n({name:r.name,phoneNumber:r.phoneNumber,fullAddress:`${r.address}, ${r.city}, ${r.state}, ${r.country}, ${r.zipCode}`,addressType:r.addressType,primary:r.primary}),o()}catch(b){console.error(b)}});return e.jsx(F,{fullWidth:!0,maxWidth:"sm",open:a,onClose:o,children:e.jsxs(k,{methods:m,onSubmit:x,children:[e.jsx(P,{children:"New address"}),e.jsx(G,{dividers:!0,children:e.jsxs(i,{spacing:3,children:[e.jsx(H,{row:!0,name:"addressType",options:[{label:"Home",value:"Home"},{label:"Office",value:"Office"}]}),e.jsxs(C,{rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"},children:[e.jsx(y,{name:"name",label:"Full Name"}),e.jsx(y,{name:"phoneNumber",label:"Phone Number"})]}),e.jsx(y,{name:"address",label:"Address"}),e.jsxs(C,{rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(3, 1fr)"},children:[e.jsx(y,{name:"city",label:"Town / City"}),e.jsx(y,{name:"state",label:"State"}),e.jsx(y,{name:"zipCode",label:"Zip/Code"})]}),e.jsx(R,{name:"country",label:"Country",options:v.map(r=>r.label),getOptionLabel:r=>r,renderOption:(r,b)=>{const{code:j,label:h,phone:w}=v.filter(s=>s.label===b)[0];return h?g.createElement("li",{...r,key:h},e.jsx(T,{icon:`circle-flags:${j.toLowerCase()}`,width:28,sx:{mr:1}},h),h," (",j,") +",w):null}}),e.jsx(B,{name:"primary",label:"Use this address as default."})]})}),e.jsxs(z,{children:[e.jsx(q,{color:"inherit",variant:"outlined",onClick:o,children:"Cancel"}),e.jsx(W,{type:"submit",variant:"contained",loading:l,children:"Deliver to this Address"})]})]})})}V.propTypes={onClose:t.func,onCreate:t.func,open:t.bool};function X({title:a="Address Book",list:o,action:n,open:f,onClose:d,selected:m,onSelect:u}){const[l,x]=g.useState(""),r=J({inputData:o,query:l}),b=!r.length&&!!l,j=g.useCallback(s=>{x(s.target.value)},[]),h=g.useCallback(s=>{u(s),x(""),d()},[d,u]),w=e.jsx(i,{spacing:.5,sx:{p:.5,maxHeight:80*8,overflowX:"hidden"},children:r.map(s=>e.jsxs(i,{spacing:.5,component:L,selected:m(`${s.id}`),onClick:()=>h(s),sx:{py:1,px:1.5,borderRadius:1,flexDirection:"column",alignItems:"flex-start",[`&.${N.selected}`]:{bgcolor:"action.selected","&:hover":{bgcolor:"action.selected"}}},children:[e.jsxs(i,{direction:"row",alignItems:"center",spacing:1,children:[e.jsx(p,{variant:"subtitle2",children:s.name}),s.primary&&e.jsx(A,{color:"info",children:"Default"})]}),s.company&&e.jsx(C,{sx:{color:"primary.main",typography:"caption"},children:s.company}),e.jsx(p,{variant:"body2",sx:{color:"text.secondary"},children:s.fullAddress}),s.phoneNumber&&e.jsx(p,{variant:"body2",sx:{color:"text.secondary"},children:s.phoneNumber})]},s.id))});return e.jsxs(F,{fullWidth:!0,maxWidth:"xs",open:f,onClose:d,children:[e.jsxs(i,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{p:3,pr:1.5},children:[e.jsxs(p,{variant:"h6",children:[" ",a," "]}),n&&n]}),e.jsx(i,{sx:{p:2,pt:0},children:e.jsx(Z,{value:l,onChange:j,placeholder:"Search...",InputProps:{startAdornment:e.jsx(Q,{position:"start",children:e.jsx(T,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}})}),b?e.jsx(E,{query:l,sx:{px:3,pt:5,pb:10}}):w]})}X.propTypes={action:t.node,list:t.array,onClose:t.func,onSelect:t.func,open:t.bool,selected:t.func,title:t.string};function J({inputData:a,query:o}){return o?a.filter(n=>n.name.toLowerCase().indexOf(o.toLowerCase())!==-1||n.fullAddress.toLowerCase().indexOf(o.toLowerCase())!==-1||`${n.company}`.toLowerCase().indexOf(o.toLowerCase())!==-1):a}export{U as A,V as a,X as b};
