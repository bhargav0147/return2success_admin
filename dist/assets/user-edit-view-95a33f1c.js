import{a as D,ci as z,r as d,p as F,j as a,G as m,o as r,F as $,e as p,T as g,B as S,S as h,cW as P,q as A,v as O,c_ as H,C as M}from"./index-27ffd735.js";import{C as W}from"./custom-breadcrumbs-891ee9b7.js";import{o as _}from"./yup-c975ca61.js";import{c as Z,a as i,v as J,j as K,u as Q,F as X,w as Y,C as U,R as t}from"./rhf-autocomplete-cc9ff921.js";import{F as ee}from"./FormControlLabel-4c76a5b9.js";import{S as ae}from"./Switch-356d0d7d.js";import{L as y}from"./LoadingButton-405ddbf1.js";function k({currentUser:e}){const x=D(),{enqueueSnackbar:l}=z(),u=Z().shape({name:i().required("Name is required"),email:i().required("Email is required").email("Email must be a valid email address"),phoneNumber:i().required("Phone number is required"),address:i().required("Address is required"),country:i().required("Country is required"),company:i().required("Company is required"),state:i().required("State is required"),city:i().required("City is required"),role:i().required("Role is required"),zipCode:i().required("Zip code is required"),avatarUrl:J().nullable().required("Avatar is required"),status:i(),isVerified:K()}),T=d.useMemo(()=>({name:(e==null?void 0:e.name)||"",city:(e==null?void 0:e.city)||"",role:(e==null?void 0:e.role)||"",email:(e==null?void 0:e.email)||"",state:(e==null?void 0:e.state)||"",status:(e==null?void 0:e.status)||"",address:(e==null?void 0:e.address)||"",country:(e==null?void 0:e.country)||"",zipCode:(e==null?void 0:e.zipCode)||"",company:(e==null?void 0:e.company)||"",avatarUrl:(e==null?void 0:e.avatarUrl)||null,phoneNumber:(e==null?void 0:e.phoneNumber)||"",isVerified:(e==null?void 0:e.isVerified)||!0}),[e]),q=Q({resolver:_(u),defaultValues:T}),{reset:I,watch:L,control:N,setValue:C,handleSubmit:R,formState:{isSubmitting:c}}=q,b=L(),[n,v]=d.useState({membershipFee:0,promotionFee:0,referallFee:0}),j=s=>{const{name:o,value:f}=s.target;v(B=>({...B,[o]:f}))},G=R(async s=>{try{await new Promise(o=>setTimeout(o,500)),I(),l(e?"Update success!":"Create success!"),x.push(F.dashboard.user.list),console.info("DATA",s)}catch(o){console.error(o)}}),E=d.useCallback(s=>{const o=s[0],f=Object.assign(o,{preview:URL.createObjectURL(o)});o&&C("avatarUrl",f,{shouldValidate:!0})},[C]),V=async()=>{try{(await P.patch("/api/admin/manageamounts",{memberShipAmount:n.membershipFee,promotionAmount:n.promotionFee,referallAmount:n.referallFee})).status===200&&(await w(),l("Fees updated successfully!"))}catch(s){console.log(s)}},w=async()=>{try{const{data:s,status:o}=await P.get("/api/admin/manageamounts");o===200&&v({membershipFee:s.data.results.membershipAmount,promotionFee:s.data.results.promotionAmount,referallFee:s.data.results.referallAmount})}catch(s){console.log(s)}};return d.useEffect(()=>{w()},[]),a.jsx(X,{methods:q,onSubmit:G,children:a.jsxs(m,{container:!0,spacing:3,children:[a.jsx(m,{xs:12,md:4,children:a.jsxs(r,{sx:{pt:10,pb:5,px:3},children:[e&&a.jsx($,{color:b.status==="active"&&"success"||b.status==="banned"&&"error"||"warning",sx:{position:"absolute",top:24,right:24},children:b.status}),a.jsx(p,{sx:{mb:5},children:a.jsx(Y,{name:"avatarUrl",maxSize:3145728,onDrop:E,helperText:a.jsx(g,{variant:"contained",sx:{mt:3,mx:"auto",display:"block",textAlign:"center",color:"success"},children:a.jsx(S,{color:"success",children:"Update Photo "})})})}),e&&a.jsx(ee,{labelPlacement:"start",control:a.jsx(U,{name:"status",control:N,render:({field:s})=>a.jsx(ae,{...s,checked:s.value!=="active",onChange:o=>s.onChange(o.target.checked?"banned":"active")})}),label:a.jsxs(a.Fragment,{children:[a.jsx(g,{variant:"subtitle2",sx:{mb:.5},children:"Banned"}),a.jsx(g,{variant:"body2",sx:{color:"text.secondary"},children:"Apply disable account"})]}),sx:{mx:0,mb:3,width:1,justifyContent:"space-between"}}),e&&a.jsx(h,{justifyContent:"center",alignItems:"center",sx:{mt:3},children:a.jsx(S,{variant:"soft",color:"error",children:"Delete User"})})]})}),a.jsxs(m,{xs:12,md:8,children:[a.jsxs(r,{sx:{p:3},children:[a.jsxs(p,{rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"},children:[a.jsx(t,{name:"name",label:"Full Name",required:!0}),a.jsx(t,{name:"phoneNumber",label:"Phone Number",required:!0})]}),a.jsx(h,{alignItems:"flex-end",sx:{mt:3},children:a.jsx(y,{type:"submit",variant:"contained",loading:c,children:"Update"})})]}),a.jsx(r,{sx:{p:3,mt:3},children:a.jsxs(p,{rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"},children:[a.jsx(t,{name:"password",label:"Old Password",required:!0}),a.jsx(t,{name:"password",label:"New Password",required:!0}),a.jsx(t,{name:"password",label:"Confirm Password",required:!0}),a.jsx(h,{alignItems:"flex-end",sx:{mt:1},children:a.jsx(y,{type:"submit",variant:"contained",loading:c,children:"Update password"})})]})})]}),a.jsx(m,{xs:12,md:12,children:a.jsxs(r,{sx:{p:3},children:[a.jsxs(p,{rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)",md:"repeat(3,1fr)"},children:[a.jsx(t,{name:"membershipFee",label:"Membership Fee (₹)",required:!0,onChange:j,value:n.membershipFee,InputLabelProps:{shrink:!0}}),a.jsx(t,{name:"promotionFee",label:"Promotion Fee (₹)",required:!0,onChange:j,value:n.promotionFee,InputLabelProps:{shrink:!0}}),a.jsx(t,{name:"referallFee",label:"Referral Fee (₹)",required:!0,onChange:j,value:n.referallFee,InputLabelProps:{shrink:!0}})]}),a.jsx(h,{alignItems:"flex-end",sx:{mt:3},children:a.jsx(y,{variant:"contained",loading:c,onClick:V,children:"Update Fees"})})]})})]})})}k.propTypes={currentUser:A.object};function se({id:e}){const x=O(),l=H.find(u=>u.id===e);return a.jsxs(M,{maxWidth:x.themeStretch?!1:"lg",children:[a.jsx(W,{heading:"Settings",links:[{name:"Dashboard",href:F.dashboard.root},{name:"User",href:F.dashboard.user.root},{name:l==null?void 0:l.name}],sx:{mb:{xs:3,md:5}}}),a.jsx(k,{currentUser:l})]})}se.propTypes={id:A.string};export{se as U,k as a};
