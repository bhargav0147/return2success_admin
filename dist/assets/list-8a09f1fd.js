import{g as U,v as $,a as q,c as G,r as d,db as J,p as x,j as e,C as K,B as I,R as M,d as b,o as F,ai as A,S as k,D as Q,k as X,F as Y,dc as Z,bj as P,I as R,W as ee}from"./index-27ffd735.js";import{s as B}from"./sumBy-4f4975fb.js";import{a as T}from"./format-time-4dc4f2eb.js";import{C as te}from"./confirm-dialog-31af3c64.js";import{C as oe}from"./custom-breadcrumbs-891ee9b7.js";import{g as re,e as se}from"./utils-b5337f6b.js";import{u as ae}from"./use-table-ad19f892.js";import{f as ne,a as le,d as ie,b as ce,e as de}from"./table-pagination-custom-61c144d7.js";import{I as f,a as me,b as pe,c as ue}from"./invoice-details-view-2048e169.js";import{T as he,a as ge}from"./Tabs-a75c564a.js";import{T as xe,a as be,b as fe}from"./TableContainer-f8ac8b22.js";import"./_baseIteratee-9e852688.js";import"./_baseToString-c85d59f0.js";import"./_baseSum-340d39f5.js";import"./Dialog-5a3d7487.js";import"./DialogTitle-eb11eb3a.js";import"./dialogTitleClasses-80e3b880.js";import"./DialogContent-90bef667.js";import"./DialogActions-29076f9a.js";import"./index-e5978b8b.js";import"./empty-content-67ee3c7b.js";import"./TablePagination-488334e4.js";import"./KeyboardArrowRight-44da873a.js";import"./FirstPage-6da56183.js";import"./Select-7c65bb90.js";import"./Menu-02e5c653.js";import"./List-1e1da31b.js";import"./utils-a73c94d0.js";import"./formControlState-a1fb9590.js";import"./useFormControl-146f88ba.js";import"./InputBase-894de89e.js";import"./Checkbox-ca090919.js";import"./SwitchBase-cff1fcb3.js";import"./FormControlLabel-4c76a5b9.js";import"./Switch-356d0d7d.js";import"./format-number-bf5061ab.js";import"./CircularProgress-a33cd36e.js";import"./ListItemText-ff35796a.js";import"./FormControl-26894946.js";import"./TextField-18c86d14.js";import"./FormLabel-fae9cf0f.js";import"./DatePicker-3e2c25a6.js";import"./InputAdornment-babdc070.js";import"./ListItem-fe933c2f.js";import"./ListItemSecondaryAction-d2bd79ed.js";import"./Chip-a5be7a74.js";import"./custom-date-range-picker-5d847698.js";import"./rhf-autocomplete-cc9ff921.js";import"./upload-avatar-5c17c7d6.js";import"./fade-27de7a97.js";import"./file-thumbnail-bdf7cfb6.js";import"./index-b7215938.js";import"./image-7d02ef11.js";import"./FormGroup-6550ea98.js";import"./editor-7e7ca674.js";import"./highlight-d4e5d3fc.js";import"./Slider-8f570469.js";import"./visuallyHidden-14c3de6e.js";import"./RadioGroup-d8b34bea.js";import"./Radio-a65c6d92.js";import"./Autocomplete-b5c308cf.js";import"./Close-d91a1546.js";import"./yup-c975ca61.js";import"./address-list-dialog-bbb9dfcd.js";import"./LoadingButton-405ddbf1.js";import"./search-not-found-e6059c5f.js";const je=[{id:"invoiceNumber",label:"Customer"},{id:"createDate",label:"Create"},{id:"dueDate",label:"Due"},{id:"price",label:"Amount"},{id:"sent",label:"Sent",align:"center"},{id:"status",label:"Status"},{id:""}],L={name:"",service:[],status:"all",startDate:null,endDate:null};function ve(){const a=U(),D=$(),p=q(),t=ae({defaultOrderBy:"createDate"}),m=G(),[s,u]=d.useState(J),[n,h]=d.useState(L),g=n.startDate&&n.endDate?n.startDate.getTime()>n.endDate.getTime():!1,r=we({inputData:s,comparator:re(t.order,t.orderBy),filters:n,dateError:g}),i=r.slice(t.page*t.rowsPerPage,t.page*t.rowsPerPage+t.rowsPerPage),j=t.dense?56:76,y=!!n.name||!!n.service.length||n.status!=="all"||!!n.startDate&&!!n.endDate,E=!r.length&&y||!r.length,c=o=>s.filter(l=>l.status===o).length,v=o=>B(s.filter(l=>l.status===o),"totalAmount"),w=o=>c(o)/s.length*100,O=[{value:"all",label:"All",color:"default",count:s.length},{value:"paid",label:"Paid",color:"success",count:c("paid")},{value:"pending",label:"Pending",color:"warning",count:c("pending")},{value:"overdue",label:"Overdue",color:"error",count:c("overdue")},{value:"draft",label:"Draft",color:"default",count:c("draft")}],C=d.useCallback((o,l)=>{t.onResetPage(),h(S=>({...S,[o]:l}))},[t]),N=d.useCallback(o=>{const l=s.filter(S=>S.id!==o);u(l),t.onUpdatePageDeleteRow(i.length)},[i.length,t,s]),V=d.useCallback(()=>{const o=s.filter(l=>!t.selected.includes(l.id));u(o),t.onUpdatePageDeleteRows({totalRows:s.length,totalRowsInPage:i.length,totalRowsFiltered:r.length})},[r.length,i.length,t,s]),_=d.useCallback(o=>{p.push(x.dashboard.invoice.edit(o))},[p]),H=d.useCallback(o=>{p.push(x.dashboard.invoice.details(o))},[p]),W=d.useCallback((o,l)=>{C("status",l)},[C]),z=d.useCallback(()=>{h(L)},[]);return e.jsxs(e.Fragment,{children:[e.jsxs(K,{maxWidth:D.themeStretch?!1:"lg",children:[e.jsx(oe,{heading:"List",links:[{name:"Dashboard",href:x.dashboard.root},{name:"Invoice",href:x.dashboard.invoice.root},{name:"List"}],action:e.jsx(I,{component:M,href:x.dashboard.invoice.new,variant:"contained",startIcon:e.jsx(b,{icon:"mingcute:add-line"}),children:"New Invoice"}),sx:{mb:{xs:3,md:5}}}),e.jsx(F,{sx:{mb:{xs:3,md:5}},children:e.jsx(A,{children:e.jsxs(k,{direction:"row",divider:e.jsx(Q,{orientation:"vertical",flexItem:!0,sx:{borderStyle:"dashed"}}),sx:{py:2},children:[e.jsx(f,{title:"Total",total:s.length,percent:100,price:B(s,"totalAmount"),icon:"solar:bill-list-bold-duotone",color:a.palette.info.main}),e.jsx(f,{title:"Paid",total:c("paid"),percent:w("paid"),price:v("paid"),icon:"solar:file-check-bold-duotone",color:a.palette.success.main}),e.jsx(f,{title:"Pending",total:c("pending"),percent:w("pending"),price:v("pending"),icon:"solar:sort-by-time-bold-duotone",color:a.palette.warning.main}),e.jsx(f,{title:"Overdue",total:c("overdue"),percent:w("overdue"),price:v("overdue"),icon:"solar:bell-bing-bold-duotone",color:a.palette.error.main}),e.jsx(f,{title:"Draft",total:c("draft"),percent:w("draft"),price:v("draft"),icon:"solar:file-corrupted-bold-duotone",color:a.palette.text.secondary})]})})}),e.jsxs(F,{children:[e.jsx(he,{value:n.status,onChange:W,sx:{px:2.5,boxShadow:`inset 0 -2px 0 0 ${X(a.palette.grey[500],.08)}`},children:O.map(o=>e.jsx(ge,{value:o.value,label:o.label,iconPosition:"end",icon:e.jsx(Y,{variant:(o.value==="all"||o.value===n.status)&&"filled"||"soft",color:o.color,children:o.count})},o.value))}),e.jsx(me,{filters:n,onFilters:C,dateError:g,serviceOptions:Z.map(o=>o.name)}),y&&e.jsx(pe,{filters:n,onFilters:C,onResetFilters:z,results:r.length,sx:{p:2.5,pt:0}}),e.jsxs(xe,{sx:{position:"relative",overflow:"unset"},children:[e.jsx(ne,{dense:t.dense,numSelected:t.selected.length,rowCount:s.length,onSelectAllRows:o=>t.onSelectAllRows(o,s.map(l=>l.id)),action:e.jsxs(k,{direction:"row",children:[e.jsx(P,{title:"Sent",children:e.jsx(R,{color:"primary",children:e.jsx(b,{icon:"iconamoon:send-fill"})})}),e.jsx(P,{title:"Download",children:e.jsx(R,{color:"primary",children:e.jsx(b,{icon:"eva:download-outline"})})}),e.jsx(P,{title:"Print",children:e.jsx(R,{color:"primary",children:e.jsx(b,{icon:"solar:printer-minimalistic-bold"})})}),e.jsx(P,{title:"Delete",children:e.jsx(R,{color:"primary",onClick:m.onTrue,children:e.jsx(b,{icon:"solar:trash-bin-trash-bold"})})})]})}),e.jsx(A,{children:e.jsxs(be,{size:t.dense?"small":"medium",sx:{minWidth:800},children:[e.jsx(le,{order:t.order,orderBy:t.orderBy,headLabel:je,rowCount:s.length,numSelected:t.selected.length,onSort:t.onSort,onSelectAllRows:o=>t.onSelectAllRows(o,s.map(l=>l.id))}),e.jsxs(fe,{children:[r.slice(t.page*t.rowsPerPage,t.page*t.rowsPerPage+t.rowsPerPage).map(o=>e.jsx(ue,{row:o,selected:t.selected.includes(o.id),onSelectRow:()=>t.onSelectRow(o.id),onViewRow:()=>H(o.id),onEditRow:()=>_(o.id),onDeleteRow:()=>N(o.id)},o.id)),e.jsx(ie,{height:j,emptyRows:se(t.page,t.rowsPerPage,s.length)}),e.jsx(ce,{notFound:E})]})]})})]}),e.jsx(de,{count:r.length,page:t.page,rowsPerPage:t.rowsPerPage,onPageChange:t.onChangePage,onRowsPerPageChange:t.onChangeRowsPerPage,dense:t.dense,onChangeDense:t.onChangeDense})]})]}),e.jsx(te,{open:m.value,onClose:m.onFalse,title:"Delete",content:e.jsxs(e.Fragment,{children:["Are you sure want to delete ",e.jsxs("strong",{children:[" ",t.selected.length," "]})," items?"]}),action:e.jsx(I,{variant:"contained",color:"error",onClick:()=>{V(),m.onFalse()},children:"Delete"})})]})}function we({inputData:a,comparator:D,filters:p,dateError:t}){const{name:m,status:s,service:u,startDate:n,endDate:h}=p,g=a.map((r,i)=>[r,i]);return g.sort((r,i)=>{const j=D(r[0],i[0]);return j!==0?j:r[1]-i[1]}),a=g.map(r=>r[0]),m&&(a=a.filter(r=>r.invoiceNumber.toLowerCase().indexOf(m.toLowerCase())!==-1||r.invoiceTo.name.toLowerCase().indexOf(m.toLowerCase())!==-1)),s!=="all"&&(a=a.filter(r=>r.status===s)),u.length&&(a=a.filter(r=>r.items.some(i=>u.includes(i.service)))),t||n&&h&&(a=a.filter(r=>T(r.createDate)>=T(n)&&T(r.createDate)<=T(h))),a}function Lt(){return e.jsxs(e.Fragment,{children:[e.jsx(ee,{children:e.jsx("title",{children:" Dashboard: Invoice List"})}),e.jsx(ve,{})]})}export{Lt as default};
