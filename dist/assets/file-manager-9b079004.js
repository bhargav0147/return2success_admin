import{r as x,cb as V,j as e,A as Y,bj as ee,B as A,d as r,cc as _,J as E,D as $,q as n,ai as be,c as w,S as b,I as O,e as R,T as M,$ as Le,g as Ce,ci as re,k as G,cp as Ee,cv as oe,c5 as me,bO as ae,cx as ze,F as Oe,x as Me,R as We,y as le,dX as Be,bT as ue,v as Ne,dY as $e,dZ as Ue,C as Ge,W as Ve}from"./index-27ffd735.js";import{b as fe,a as H}from"./format-time-4dc4f2eb.js";import{E as _e}from"./empty-content-67ee3c7b.js";import{a as ye,F as J}from"./file-thumbnail-bdf7cfb6.js";import{C as X}from"./confirm-dialog-31af3c64.js";import{e as qe,g as He}from"./utils-b5337f6b.js";import{u as Ke}from"./use-table-ad19f892.js";import{T as Ye,f as Je,a as Xe,d as Ze,b as Qe,e as eo}from"./table-pagination-custom-61c144d7.js";import{u as oo}from"./use-double-click-1ccea145.js";import{u as ie}from"./use-copy-to-clipboard-af9f493c.js";import{b as Z}from"./format-number-bf5061ab.js";import{L as no}from"./ListItem-fe933c2f.js";import{L as ce}from"./ListItemText-ff35796a.js";import{D as to}from"./Dialog-5a3d7487.js";import{D as so}from"./DialogTitle-eb11eb3a.js";import{D as ro}from"./DialogContent-90bef667.js";import{T as de}from"./TextField-18c86d14.js";import{I as ve}from"./InputAdornment-babdc070.js";import{L as ao}from"./List-1e1da31b.js";import{D as lo}from"./DialogActions-29076f9a.js";import{A as io}from"./Autocomplete-b5c308cf.js";import{C as ne}from"./Chip-a5be7a74.js";import{C as W}from"./Checkbox-ca090919.js";import{T as N}from"./TablePagination-488334e4.js";import{A as pe}from"./AvatarGroup-4ff0f142.js";import{T as co,a as po,b as ho}from"./TableContainer-f8ac8b22.js";import{s as we,C as xo}from"./custom-date-range-picker-5d847698.js";import{T as mo}from"./text-max-line-a5d49445.js";import{F as K}from"./file-manager-new-folder-dialog-10ab5cf7.js";import{T as uo,a as ge}from"./ToggleButtonGroup-fd6d57a6.js";import"./FormControlLabel-4c76a5b9.js";import"./formControlState-a1fb9590.js";import"./useFormControl-146f88ba.js";import"./Switch-356d0d7d.js";import"./SwitchBase-cff1fcb3.js";import"./ListItemSecondaryAction-d2bd79ed.js";import"./dialogTitleClasses-80e3b880.js";import"./FormControl-26894946.js";import"./utils-a73c94d0.js";import"./FormLabel-fae9cf0f.js";import"./Select-7c65bb90.js";import"./index-e5978b8b.js";import"./Menu-02e5c653.js";import"./InputBase-894de89e.js";import"./Close-d91a1546.js";import"./KeyboardArrowRight-44da873a.js";import"./FirstPage-6da56183.js";import"./DatePicker-3e2c25a6.js";import"./upload-avatar-5c17c7d6.js";import"./fade-27de7a97.js";import"./index-b7215938.js";import"./image-7d02ef11.js";function he({person:o}){const[i,p]=x.useState(o.permission),t=V(),l=x.useCallback(h=>{p(h)},[]);return e.jsxs(e.Fragment,{children:[e.jsxs(no,{sx:{px:0,py:1},children:[e.jsx(Y,{alt:o.name,src:o.avatarUrl,sx:{mr:2}}),e.jsx(ce,{primary:o.name,secondary:e.jsx(ee,{title:o.email,children:e.jsx("span",{children:o.email})}),primaryTypographyProps:{noWrap:!0,typography:"subtitle2"},secondaryTypographyProps:{noWrap:!0,component:"span"},sx:{flexGrow:1,pr:1}}),e.jsxs(A,{size:"small",color:"inherit",endIcon:e.jsx(r,{width:20,icon:t.open?"eva:arrow-ios-upward-fill":"eva:arrow-ios-downward-fill",sx:{ml:-1}}),onClick:t.onOpen,sx:{flexShrink:0,...t.open&&{bgcolor:"action.selected"}},children:["Can ",i]})]}),e.jsx(_,{open:t.open,onClose:t.onClose,sx:{width:160},children:e.jsxs(e.Fragment,{children:[e.jsxs(E,{selected:i==="view",onClick:()=>{t.onClose(),l("view")},children:[e.jsx(r,{icon:"solar:eye-bold"}),"Can view"]}),e.jsxs(E,{selected:i==="edit",onClick:()=>{t.onClose(),l("edit")},children:[e.jsx(r,{icon:"solar:pen-bold"}),"Can edit"]}),e.jsx($,{sx:{borderStyle:"dashed"}}),e.jsxs(E,{onClick:()=>{t.onClose()},sx:{color:"error.main"},children:[e.jsx(r,{icon:"solar:trash-bin-trash-bold"}),"Remove"]})]})})]})}he.propTypes={person:n.object};function U({shared:o,inviteEmail:i,onCopyLink:p,onChangeInvite:t,open:l,onClose:h,...g}){const s=o&&!!o.length;return e.jsxs(to,{fullWidth:!0,maxWidth:"xs",open:l,onClose:h,...g,children:[e.jsx(so,{children:" Invite "}),e.jsxs(ro,{sx:{overflow:"unset"},children:[t&&e.jsx(de,{fullWidth:!0,value:i,placeholder:"Email",onChange:t,InputProps:{endAdornment:e.jsx(ve,{position:"end",children:e.jsx(A,{color:"inherit",variant:"contained",disabled:!i,sx:{mr:-.75},children:"Send Invite"})})},sx:{mb:2}}),s&&e.jsx(be,{sx:{maxHeight:60*6},children:e.jsx(ao,{disablePadding:!0,children:o.map(f=>e.jsx(he,{person:f},f.id))})})]}),e.jsxs(lo,{sx:{justifyContent:"space-between"},children:[p&&e.jsx(A,{startIcon:e.jsx(r,{icon:"eva:link-2-fill"}),onClick:p,children:"Copy link"}),h&&e.jsx(A,{variant:"outlined",color:"inherit",onClick:h,children:"Close"})]})]})}U.propTypes={inviteEmail:n.string,onChangeInvite:n.func,onClose:n.func,onCopyLink:n.func,open:n.bool,shared:n.array};function Q({item:o,open:i,favorited:p,onFavorite:t,onCopyLink:l,onClose:h,onDelete:g,...s}){const{name:f,size:a,url:C,type:j,shared:u,modifiedAt:v}=o,y=u&&!!u.length,m=w(!0),k=w(),d=w(!0),[T,F]=x.useState(""),[c,D]=x.useState(o.tags.slice(0,3)),z=x.useCallback(I=>{F(I.target.value)},[]),S=x.useCallback(I=>{D(I)},[]),P=e.jsxs(b,{spacing:1.5,children:[e.jsxs(b,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{typography:"subtitle2"},children:["Tags",e.jsx(O,{size:"small",onClick:m.onToggle,children:e.jsx(r,{icon:m.value?"eva:arrow-ios-upward-fill":"eva:arrow-ios-downward-fill"})})]}),m.value&&e.jsx(io,{multiple:!0,freeSolo:!0,options:o.tags.map(I=>I),getOptionLabel:I=>I,defaultValue:o.tags.slice(0,3),value:c,onChange:(I,L)=>{S(L)},renderOption:(I,L)=>x.createElement("li",{...I,key:L},L),renderTags:(I,L)=>I.map((xe,Ae)=>x.createElement(ne,{...L({index:Ae}),size:"small",variant:"soft",label:xe,key:xe})),renderInput:I=>e.jsx(de,{...I,placeholder:"#Add a tags"})})]}),B=e.jsxs(b,{spacing:1.5,children:[e.jsxs(b,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{typography:"subtitle2"},children:["Properties",e.jsx(O,{size:"small",onClick:d.onToggle,children:e.jsx(r,{icon:d.value?"eva:arrow-ios-upward-fill":"eva:arrow-ios-downward-fill"})})]}),d.value&&e.jsxs(e.Fragment,{children:[e.jsxs(b,{direction:"row",sx:{typography:"caption",textTransform:"capitalize"},children:[e.jsx(R,{component:"span",sx:{width:80,color:"text.secondary",mr:2},children:"Size"}),Z(a)]}),e.jsxs(b,{direction:"row",sx:{typography:"caption",textTransform:"capitalize"},children:[e.jsx(R,{component:"span",sx:{width:80,color:"text.secondary",mr:2},children:"Modified"}),fe(v)]}),e.jsxs(b,{direction:"row",sx:{typography:"caption",textTransform:"capitalize"},children:[e.jsx(R,{component:"span",sx:{width:80,color:"text.secondary",mr:2},children:"Type"}),ye(j)]})]})]}),q=e.jsxs(e.Fragment,{children:[e.jsxs(b,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{p:2.5},children:[e.jsx(M,{variant:"subtitle2",children:" File Share With "}),e.jsx(O,{size:"small",color:"primary",onClick:k.onTrue,sx:{width:24,height:24,bgcolor:"primary.main",color:"primary.contrastText","&:hover":{bgcolor:"primary.dark"}},children:e.jsx(r,{icon:"mingcute:add-line"})})]}),y&&e.jsx(R,{sx:{pl:2.5,pr:1},children:u.map(I=>e.jsx(he,{person:I},I.id))})]});return e.jsxs(e.Fragment,{children:[e.jsxs(Le,{open:i,onClose:h,anchor:"right",slotProps:{backdrop:{invisible:!0}},PaperProps:{sx:{width:320}},...s,children:[e.jsxs(be,{sx:{height:1},children:[e.jsxs(b,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{p:2.5},children:[e.jsx(M,{variant:"h6",children:" Info "}),e.jsx(W,{color:"warning",icon:e.jsx(r,{icon:"eva:star-outline"}),checkedIcon:e.jsx(r,{icon:"eva:star-fill"}),checked:p,onChange:t})]}),e.jsxs(b,{spacing:2.5,justifyContent:"center",sx:{p:2.5,bgcolor:"background.neutral"},children:[e.jsx(J,{imageView:!0,file:j==="folder"?j:C,sx:{width:64,height:64},imgSx:{borderRadius:1}}),e.jsx(M,{variant:"subtitle1",sx:{wordBreak:"break-all"},children:f}),e.jsx($,{sx:{borderStyle:"dashed"}}),P,B]}),q]}),e.jsx(R,{sx:{p:2.5},children:e.jsx(A,{fullWidth:!0,variant:"soft",color:"error",size:"large",startIcon:e.jsx(r,{icon:"solar:trash-bin-trash-bold"}),onClick:g,children:"Delete"})})]}),e.jsx(U,{open:k.value,shared:u,inviteEmail:T,onChangeInvite:z,onCopyLink:l,onClose:()=>{k.onFalse(),F("")}})]})}Q.propTypes={favorited:n.bool,item:n.object,onClose:n.func,onCopyLink:n.func,onDelete:n.func,onFavorite:n.func,open:n.bool};function ke({row:o,selected:i,onSelectRow:p,onDeleteRow:t}){const l=Ce(),{name:h,size:g,type:s,modifiedAt:f,shared:a,isFavorited:C}=o,{enqueueSnackbar:j}=re(),{copy:u}=ie(),[v,y]=x.useState(""),m=w(C),k=w(),d=w(),T=w(),F=V(),c=x.useCallback(P=>{y(P.target.value)},[]),D=oo({click:()=>{k.onTrue()},doubleClick:()=>console.info("DOUBLE CLICK")}),z=x.useCallback(()=>{j("Copied!"),u(o.url)},[u,j,o.url]),S={borderTop:`solid 1px ${G(l.palette.grey[500],.16)}`,borderBottom:`solid 1px ${G(l.palette.grey[500],.16)}`,"&:first-of-type":{borderTopLeftRadius:16,borderBottomLeftRadius:16,borderLeft:`solid 1px ${G(l.palette.grey[500],.16)}`},"&:last-of-type":{borderTopRightRadius:16,borderBottomRightRadius:16,borderRight:`solid 1px ${G(l.palette.grey[500],.16)}`}};return e.jsxs(e.Fragment,{children:[e.jsxs(Ye,{selected:i,sx:{borderRadius:2,[`&.${Ee.selected}, &:hover`]:{backgroundColor:"background.paper",boxShadow:l.customShadows.z20,transition:l.transitions.create(["background-color","box-shadow"],{duration:l.transitions.duration.shortest}),"&:hover":{backgroundColor:"background.paper",boxShadow:l.customShadows.z20}},[`& .${oe.root}`]:{...S},...k.value&&{[`& .${oe.root}`]:{...S}}},children:[e.jsx(N,{padding:"checkbox",children:e.jsx(W,{checked:i,onDoubleClick:()=>console.info("ON DOUBLE CLICK"),onClick:p})}),e.jsx(N,{onClick:D,children:e.jsxs(b,{direction:"row",alignItems:"center",spacing:2,children:[e.jsx(J,{file:s,sx:{width:36,height:36}}),e.jsx(M,{noWrap:!0,variant:"inherit",sx:{maxWidth:360,cursor:"pointer",...k.value&&{fontWeight:"fontWeightBold"}},children:h})]})}),e.jsx(N,{onClick:D,sx:{whiteSpace:"nowrap"},children:Z(g)}),e.jsx(N,{onClick:D,sx:{whiteSpace:"nowrap"},children:s}),e.jsx(N,{onClick:D,sx:{whiteSpace:"nowrap"},children:e.jsx(ce,{primary:me(new Date(f),"dd MMM yyyy"),secondary:me(new Date(f),"p"),primaryTypographyProps:{typography:"body2"},secondaryTypographyProps:{mt:.5,component:"span",typography:"caption"}})}),e.jsx(N,{align:"right",onClick:D,children:e.jsx(pe,{max:4,sx:{display:"inline-flex",[`& .${ae.avatar}`]:{width:24,height:24,"&:first-of-type":{fontSize:12}}},children:a&&a.map(P=>e.jsx(Y,{alt:P.name,src:P.avatarUrl},P.id))})}),e.jsxs(N,{align:"right",sx:{px:1,whiteSpace:"nowrap"},children:[e.jsx(W,{color:"warning",icon:e.jsx(r,{icon:"eva:star-outline"}),checkedIcon:e.jsx(r,{icon:"eva:star-fill"}),checked:m.value,onChange:m.onToggle,sx:{p:.75}}),e.jsx(O,{color:F.open?"inherit":"default",onClick:F.onOpen,children:e.jsx(r,{icon:"eva:more-vertical-fill"})})]})]}),e.jsxs(_,{open:F.open,onClose:F.onClose,arrow:"right-top",sx:{width:160},children:[e.jsxs(E,{onClick:()=>{F.onClose(),z()},children:[e.jsx(r,{icon:"eva:link-2-fill"}),"Copy Link"]}),e.jsxs(E,{onClick:()=>{F.onClose(),d.onTrue()},children:[e.jsx(r,{icon:"solar:share-bold"}),"Share"]}),e.jsx($,{sx:{borderStyle:"dashed"}}),e.jsxs(E,{onClick:()=>{T.onTrue(),F.onClose()},sx:{color:"error.main"},children:[e.jsx(r,{icon:"solar:trash-bin-trash-bold"}),"Delete"]})]}),e.jsx(Q,{item:o,favorited:m.value,onFavorite:m.onToggle,onCopyLink:z,open:k.value,onClose:k.onFalse,onDelete:t}),e.jsx(U,{open:d.value,shared:a,inviteEmail:v,onChangeInvite:c,onCopyLink:z,onClose:()=>{d.onFalse(),y("")}}),e.jsx(X,{open:T.value,onClose:T.onFalse,title:"Delete",content:"Are you sure want to delete?",action:e.jsx(A,{variant:"contained",color:"error",onClick:t,children:"Delete"})})]})}ke.propTypes={onDeleteRow:n.func,onSelectRow:n.func,row:n.object,selected:n.bool};const go=[{id:"name",label:"Name"},{id:"size",label:"Size",width:120},{id:"type",label:"Type",width:120},{id:"modifiedAt",label:"Modified",width:140},{id:"shared",label:"Shared",align:"right",width:140},{id:"",width:88}];function Te({table:o,tableData:i,notFound:p,onDeleteRow:t,dataFiltered:l,onOpenConfirm:h}){const g=Ce(),{dense:s,page:f,order:a,orderBy:C,rowsPerPage:j,selected:u,onSelectRow:v,onSelectAllRows:y,onSort:m,onChangeDense:k,onChangePage:d,onChangeRowsPerPage:T}=o,F=s?58:78;return e.jsxs(e.Fragment,{children:[e.jsxs(R,{sx:{position:"relative",m:g.spacing(-2,-3,-3,-3)},children:[e.jsx(Je,{dense:s,numSelected:u.length,rowCount:i.length,onSelectAllRows:c=>y(c,i.map(D=>D.id)),action:e.jsxs(e.Fragment,{children:[e.jsx(ee,{title:"Share",children:e.jsx(O,{color:"primary",children:e.jsx(r,{icon:"solar:share-bold"})})}),e.jsx(ee,{title:"Delete",children:e.jsx(O,{color:"primary",onClick:h,children:e.jsx(r,{icon:"solar:trash-bin-trash-bold"})})})]}),sx:{pl:1,pr:2,top:16,left:24,right:24,width:"auto",borderRadius:1.5}}),e.jsx(co,{sx:{p:g.spacing(0,3,3,3)},children:e.jsxs(po,{size:s?"small":"medium",sx:{minWidth:960,borderCollapse:"separate",borderSpacing:"0 16px"},children:[e.jsx(Xe,{order:a,orderBy:C,headLabel:go,rowCount:i.length,numSelected:u.length,onSort:m,onSelectAllRows:c=>y(c,i.map(D=>D.id)),sx:{[`& .${oe.head}`]:{"&:first-of-type":{borderTopLeftRadius:12,borderBottomLeftRadius:12},"&:last-of-type":{borderTopRightRadius:12,borderBottomRightRadius:12}}}}),e.jsxs(ho,{children:[l.slice(f*j,f*j+j).map(c=>e.jsx(ke,{row:c,selected:u.includes(c.id),onSelectRow:()=>v(c.id),onDeleteRow:()=>t(c.id)},c.id)),e.jsx(Ze,{height:F,emptyRows:qe(f,j,i.length)}),e.jsx(Qe,{notFound:p,sx:{m:-2,borderRadius:1.5,border:`dashed 1px ${g.palette.divider}`}})]})]})})]}),e.jsx(eo,{count:l.length,page:f,rowsPerPage:j,onPageChange:d,onRowsPerPageChange:T,dense:s,onChangeDense:k,sx:{[`& .${ze.toolbar}`]:{borderTopColor:"transparent"}}})]})}Te.propTypes={dataFiltered:n.array,notFound:n.bool,onDeleteRow:n.func,onOpenConfirm:n.func,table:n.object,tableData:n.array};function Fe({openDateRange:o,onCloseDateRange:i,onOpenDateRange:p,filters:t,onFilters:l,dateError:h,typeOptions:g}){const s=V(),f=t.type.length?t.type.slice(0,2).join(","):"All type",a=x.useCallback(d=>{l("name",d.target.value)},[l]),C=x.useCallback(d=>{l("startDate",d)},[l]),j=x.useCallback(d=>{l("endDate",d)},[l]),u=x.useCallback(d=>{const T=t.type.includes(d)?t.type.filter(F=>F!==d):[...t.type,d];l("type",T)},[t.type,l]),v=x.useCallback(()=>{s.onClose(),l("type",[])},[l,s]),y=e.jsx(de,{value:t.name,onChange:a,placeholder:"Search...",InputProps:{startAdornment:e.jsx(ve,{position:"start",children:e.jsx(r,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})},sx:{width:{xs:1,md:260}}}),m=e.jsxs(e.Fragment,{children:[e.jsxs(A,{color:"inherit",onClick:s.onOpen,endIcon:e.jsx(r,{icon:s.open?"eva:arrow-ios-upward-fill":"eva:arrow-ios-downward-fill",sx:{ml:-.5}}),children:[f,t.type.length>2&&e.jsxs(Oe,{color:"info",sx:{ml:1},children:["+",t.type.length-2]})]}),e.jsx(_,{open:s.open,onClose:s.onClose,sx:{p:2.5},children:e.jsxs(b,{spacing:2.5,children:[e.jsx(R,{gap:1,display:"grid",gridTemplateColumns:{xs:"repeat(2, 1fr)",sm:"repeat(4, 1fr)"},children:g.map(d=>{const T=t.type.includes(d);return e.jsx(Me,{onClick:()=>u(d),sx:{p:1,borderRadius:1,cursor:"pointer",border:F=>`solid 1px ${G(F.palette.grey[500],.08)}`,...T&&{bgcolor:"action.selected"}},children:e.jsxs(b,{spacing:1,direction:"row",alignItems:"center",children:[e.jsx(J,{file:d}),e.jsx(M,{variant:T?"subtitle2":"body2",children:d})]})},d)})}),e.jsxs(b,{spacing:1.5,direction:"row",alignItems:"center",justifyContent:"flex-end",children:[e.jsx(A,{variant:"outlined",color:"inherit",onClick:v,children:"Clear"}),e.jsx(A,{variant:"contained",onClick:s.onClose,children:"Apply"})]})]})})]}),k=e.jsxs(e.Fragment,{children:[e.jsx(A,{color:"inherit",onClick:p,endIcon:e.jsx(r,{icon:o?"eva:arrow-ios-upward-fill":"eva:arrow-ios-downward-fill",sx:{ml:-.5}}),children:t.startDate&&t.endDate?we(t.startDate,t.endDate):"Select Date"}),e.jsx(xo,{variant:"calendar",startDate:t.startDate,endDate:t.endDate,onChangeStartDate:C,onChangeEndDate:j,open:o,onClose:i,selected:!!t.startDate&&!!t.endDate,error:h})]});return e.jsxs(b,{spacing:1,direction:{xs:"column",md:"row"},alignItems:{xs:"flex-end",md:"center"},sx:{width:1},children:[y,e.jsxs(b,{spacing:1,direction:"row",alignItems:"center",justifyContent:"flex-end",flexGrow:1,children:[k,m]})]})}Fe.propTypes={dateError:n.bool,filters:n.object,onCloseDateRange:n.func,onFilters:n.func,onOpenDateRange:n.func,openDateRange:n.bool,typeOptions:n.array};function te({title:o,subTitle:i,link:p,onOpen:t,collapse:l,onCollapse:h,sx:g,...s}){return e.jsxs(b,{direction:"row",alignItems:"center",sx:{mb:3,...g},...s,children:[e.jsxs(b,{flexGrow:1,children:[e.jsxs(b,{direction:"row",alignItems:"center",spacing:1,flexGrow:1,children:[e.jsxs(M,{variant:"h6",children:[" ",o," "]}),e.jsx(O,{size:"small",color:"primary",onClick:t,sx:{width:24,height:24,bgcolor:"primary.main",color:"primary.contrastText","&:hover":{bgcolor:"primary.dark"}},children:e.jsx(r,{icon:"mingcute:add-line"})})]}),e.jsx(R,{sx:{typography:"body2",color:"text.disabled",mt:.5},children:i})]}),p&&e.jsx(A,{href:p,component:We,size:"small",color:"inherit",endIcon:e.jsx(r,{icon:"eva:arrow-ios-forward-fill",width:18,sx:{ml:-.5}}),children:"View All"}),h&&e.jsx(O,{onClick:h,children:e.jsx(r,{icon:l?"eva:arrow-ios-downward-fill":"eva:arrow-ios-upward-fill"})})]})}te.propTypes={collapse:n.bool,link:n.string,onCollapse:n.func,onOpen:n.func,subTitle:n.string,sx:n.object,title:n.string};function De({file:o,selected:i,onSelect:p,onDelete:t,sx:l,...h}){var z;const{enqueueSnackbar:g}=re(),{copy:s}=ie(),[f,a]=x.useState(""),C=w(),j=w(),u=w(),v=w(),y=w(o.isFavorited),m=V(),k=x.useCallback(S=>{a(S.target.value)},[]),d=x.useCallback(()=>{g("Copied!"),s(o.url)},[s,g,o.url]),T=(C.value||i)&&p?e.jsx(W,{size:"medium",checked:i,onClick:p,icon:e.jsx(r,{icon:"eva:radio-button-off-fill"}),checkedIcon:e.jsx(r,{icon:"eva:checkmark-circle-2-fill"}),sx:{p:.75}}):e.jsx(J,{file:o.type,sx:{width:36,height:36}}),F=e.jsxs(b,{direction:"row",alignItems:"center",sx:{top:8,right:8,position:"absolute"},children:[e.jsx(W,{color:"warning",icon:e.jsx(r,{icon:"eva:star-outline"}),checkedIcon:e.jsx(r,{icon:"eva:star-fill"}),checked:y.value,onChange:y.onToggle}),e.jsx(O,{color:m.open?"inherit":"default",onClick:m.onOpen,children:e.jsx(r,{icon:"eva:more-vertical-fill"})})]}),c=e.jsxs(e.Fragment,{children:[e.jsx(mo,{persistent:!0,variant:"subtitle2",onClick:v.onTrue,sx:{width:1,mt:2,mb:.5},children:o.name}),e.jsxs(b,{direction:"row",alignItems:"center",sx:{maxWidth:.99,whiteSpace:"nowrap",typography:"caption",color:"text.disabled"},children:[Z(o.size),e.jsx(R,{component:"span",sx:{mx:.75,width:2,height:2,flexShrink:0,borderRadius:"50%",bgcolor:"currentColor"}}),e.jsx(M,{noWrap:!0,component:"span",variant:"caption",children:fe(o.modifiedAt)})]})]}),D=e.jsx(pe,{max:3,sx:{mt:1,[`& .${ae.avatar}`]:{width:24,height:24,"&:first-of-type":{fontSize:12}}},children:(z=o.shared)==null?void 0:z.map(S=>e.jsx(Y,{alt:S.name,src:S.avatarUrl},S.id))});return e.jsxs(e.Fragment,{children:[e.jsxs(b,{component:le,variant:"outlined",alignItems:"flex-start",sx:{p:2.5,borderRadius:2,bgcolor:"unset",cursor:"pointer",position:"relative",...(C.value||i)&&{bgcolor:"background.paper",boxShadow:S=>S.customShadows.z20},...l},...h,children:[e.jsx(R,{onMouseEnter:C.onTrue,onMouseLeave:C.onFalse,children:T}),c,D,F]}),e.jsxs(_,{open:m.open,onClose:m.onClose,arrow:"right-top",sx:{width:160},children:[e.jsxs(E,{onClick:()=>{m.onClose(),d()},children:[e.jsx(r,{icon:"eva:link-2-fill"}),"Copy Link"]}),e.jsxs(E,{onClick:()=>{m.onClose(),j.onTrue()},children:[e.jsx(r,{icon:"solar:share-bold"}),"Share"]}),e.jsx($,{sx:{borderStyle:"dashed"}}),e.jsxs(E,{onClick:()=>{u.onTrue(),m.onClose()},sx:{color:"error.main"},children:[e.jsx(r,{icon:"solar:trash-bin-trash-bold"}),"Delete"]})]}),e.jsx(Q,{item:o,favorited:y.value,onFavorite:y.onToggle,onCopyLink:d,open:v.value,onClose:v.onFalse,onDelete:()=>{v.onFalse(),t()}}),e.jsx(U,{open:j.value,shared:o.shared,inviteEmail:f,onChangeInvite:k,onCopyLink:d,onClose:()=>{j.onFalse(),a("")}}),e.jsx(X,{open:u.value,onClose:u.onFalse,title:"Delete",content:"Are you sure want to delete?",action:e.jsx(A,{variant:"contained",color:"error",onClick:t,children:"Delete"})})]})}De.propTypes={file:n.oneOfType([n.string,n.object]),onDelete:n.func,onSelect:n.func,selected:n.bool,sx:n.object};function Se({folder:o,selected:i,onSelect:p,onDelete:t,sx:l,...h}){var q,I;const{enqueueSnackbar:g}=re(),{copy:s}=ie(),[f,a]=x.useState(""),[C,j]=x.useState(o.name),u=w(),v=w(),y=w(),m=V(),k=w(),d=w(),T=w(o.isFavorited),F=x.useCallback(L=>{a(L.target.value)},[]),c=x.useCallback(L=>{j(L.target.value)},[]),D=x.useCallback(()=>{g("Copied!"),s(o.url)},[s,g,o.url]),z=e.jsxs(b,{direction:"row",alignItems:"center",sx:{top:8,right:8,position:"absolute"},children:[e.jsx(W,{color:"warning",icon:e.jsx(r,{icon:"eva:star-outline"}),checkedIcon:e.jsx(r,{icon:"eva:star-fill"}),checked:T.value,onChange:T.onToggle}),e.jsx(O,{color:m.open?"inherit":"default",onClick:m.onOpen,children:e.jsx(r,{icon:"eva:more-vertical-fill"})})]}),S=(v.value||i)&&p?e.jsx(W,{size:"medium",checked:i,onClick:p,icon:e.jsx(r,{icon:"eva:radio-button-off-fill"}),checkedIcon:e.jsx(r,{icon:"eva:checkmark-circle-2-fill"}),sx:{p:.75}}):e.jsx(R,{component:"img",src:"/assets/icons/files/ic_folder.svg",sx:{width:36,height:36}}),P=e.jsx(ce,{onClick:d.onTrue,primary:o.name,secondary:e.jsxs(e.Fragment,{children:[Z(o.size),e.jsx(R,{component:"span",sx:{mx:.75,width:2,height:2,borderRadius:"50%",bgcolor:"currentColor"}}),o.totalFiles," files"]}),primaryTypographyProps:{noWrap:!0,typography:"subtitle1"},secondaryTypographyProps:{mt:.5,component:"span",alignItems:"center",typography:"caption",color:"text.disabled",display:"inline-flex"}}),B=e.jsx(pe,{max:3,sx:{[`& .${ae.avatar}`]:{width:24,height:24,"&:first-of-type":{fontSize:12}}},children:(q=o.shared)==null?void 0:q.map(L=>e.jsx(Y,{alt:L.name,src:L.avatarUrl},L.id))});return e.jsxs(e.Fragment,{children:[e.jsxs(b,{component:le,variant:"outlined",spacing:1,alignItems:"flex-start",sx:{p:2.5,maxWidth:222,borderRadius:2,bgcolor:"unset",cursor:"pointer",position:"relative",...(v.value||i)&&{bgcolor:"background.paper",boxShadow:L=>L.customShadows.z20},...l},...h,children:[e.jsx(R,{onMouseEnter:v.onTrue,onMouseLeave:v.onFalse,children:S}),z,P,!!((I=o==null?void 0:o.shared)!=null&&I.length)&&B]}),e.jsxs(_,{open:m.open,onClose:m.onClose,arrow:"right-top",sx:{width:160},children:[e.jsxs(E,{onClick:()=>{m.onClose(),D()},children:[e.jsx(r,{icon:"eva:link-2-fill"}),"Copy Link"]}),e.jsxs(E,{onClick:()=>{m.onClose(),y.onTrue()},children:[e.jsx(r,{icon:"solar:share-bold"}),"Share"]}),e.jsxs(E,{onClick:()=>{m.onClose(),u.onTrue()},children:[e.jsx(r,{icon:"solar:pen-bold"}),"Edit"]}),e.jsx($,{sx:{borderStyle:"dashed"}}),e.jsxs(E,{onClick:()=>{k.onTrue(),m.onClose()},sx:{color:"error.main"},children:[e.jsx(r,{icon:"solar:trash-bin-trash-bold"}),"Delete"]})]}),e.jsx(Q,{item:o,favorited:T.value,onFavorite:T.onToggle,onCopyLink:D,open:d.value,onClose:d.onFalse,onDelete:()=>{d.onFalse(),t()}}),e.jsx(U,{open:y.value,shared:o.shared,inviteEmail:f,onChangeInvite:F,onCopyLink:D,onClose:()=>{y.onFalse(),a("")}}),e.jsx(K,{open:u.value,onClose:u.onFalse,title:"Edit Folder",onUpdate:()=>{u.onFalse(),j(C),console.info("UPDATE FOLDER",C)},folderName:C,onChangeFolderName:c}),e.jsx(X,{open:k.value,onClose:k.onFalse,title:"Delete",content:"Are you sure want to delete?",action:e.jsx(A,{variant:"contained",color:"error",onClick:t,children:"Delete"})})]})}Se.propTypes={folder:n.object,onDelete:n.func,onSelect:n.func,selected:n.bool,sx:n.object};function Ie({action:o,selected:i,rowCount:p,numSelected:t,onSelectAllItems:l,sx:h,...g}){return e.jsx(Be,{children:e.jsxs(R,{sx:{right:0,zIndex:9,bottom:0,display:"flex",borderRadius:1.5,position:"fixed",alignItems:"center",bgcolor:"text.primary",p:s=>s.spacing(1.5,2,1.5,1),boxShadow:s=>s.customShadows.z20,m:{xs:2,md:3},...h},...g,children:[e.jsx(W,{indeterminate:!!t&&t<p,checked:!!p&&t===p,onChange:s=>l(s.target.checked),icon:e.jsx(r,{icon:"eva:radio-button-off-fill"}),checkedIcon:e.jsx(r,{icon:"eva:checkmark-circle-2-fill"}),indeterminateIcon:e.jsx(r,{icon:"eva:minus-circle-fill"})}),i&&e.jsxs(M,{variant:"subtitle2",sx:{mr:2,color:s=>s.palette.mode==="light"?"common.white":"grey.800"},children:[i.length," Items selected"]}),o&&o]})})}Ie.propTypes={action:n.node,numSelected:n.number,onSelectAllItems:n.func,rowCount:n.number,selected:n.array,sx:n.object};function Re({table:o,data:i,dataFiltered:p,onDeleteItem:t,onOpenConfirm:l}){const{selected:h,onSelectRow:g,onSelectAllRows:s}=o,f=x.useRef(null),[a,C]=x.useState(""),[j,u]=x.useState(""),v=w(),y=w(),m=w(),k=w(),d=w(),T=x.useCallback(c=>{u(c.target.value)},[]),F=x.useCallback(c=>{C(c.target.value)},[]);return e.jsxs(e.Fragment,{children:[e.jsxs(R,{ref:f,children:[e.jsx(te,{title:"Folders",subTitle:`${i.filter(c=>c.type==="folder").length} folders`,onOpen:y.onTrue,collapse:d.value,onCollapse:d.onToggle}),e.jsx(ue,{in:!d.value,unmountOnExit:!0,children:e.jsx(R,{gap:3,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)",md:"repeat(3, 1fr)",lg:"repeat(4, 1fr)"},children:p.filter(c=>c.type==="folder").map(c=>e.jsx(Se,{folder:c,selected:h.includes(c.id),onSelect:()=>g(c.id),onDelete:()=>t(c.id),sx:{maxWidth:"auto"}},c.id))})}),e.jsx($,{sx:{my:5,borderStyle:"dashed"}}),e.jsx(te,{title:"Files",subTitle:`${i.filter(c=>c.type!=="folder").length} files`,onOpen:m.onTrue,collapse:k.value,onCollapse:k.onToggle}),e.jsx(ue,{in:!k.value,unmountOnExit:!0,children:e.jsx(R,{display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)",md:"repeat(3, 1fr)",lg:"repeat(4, 1fr)"},gap:3,children:p.filter(c=>c.type!=="folder").map(c=>e.jsx(De,{file:c,selected:h.includes(c.id),onSelect:()=>g(c.id),onDelete:()=>t(c.id),sx:{maxWidth:"auto"}},c.id))})}),!!(h!=null&&h.length)&&e.jsx(Ie,{numSelected:h.length,rowCount:i.length,selected:h,onSelectAllItems:c=>s(c,i.map(D=>D.id)),action:e.jsxs(e.Fragment,{children:[e.jsx(A,{size:"small",color:"error",variant:"contained",startIcon:e.jsx(r,{icon:"solar:trash-bin-trash-bold"}),onClick:l,sx:{mr:1},children:"Delete"}),e.jsx(A,{color:"primary",size:"small",variant:"contained",startIcon:e.jsx(r,{icon:"solar:share-bold"}),onClick:v.onTrue,children:"Share"})]})})]}),e.jsx(U,{open:v.value,inviteEmail:j,onChangeInvite:T,onClose:()=>{v.onFalse(),u("")}}),e.jsx(K,{open:m.value,onClose:m.onFalse}),e.jsx(K,{open:y.value,onClose:y.onFalse,title:"New Folder",onCreate:()=>{y.onFalse(),C(""),console.info("CREATE NEW FOLDER",a)},folderName:a,onChangeFolderName:F})]})}Re.propTypes={data:n.array,dataFiltered:n.array,onDeleteItem:n.func,onOpenConfirm:n.func,table:n.object};function Pe({filters:o,onFilters:i,canReset:p,onResetFilters:t,results:l,...h}){const g=we(o.startDate,o.endDate),s=a=>{const C=o.type.filter(j=>j!==a);i("type",C)},f=()=>{i("startDate",null),i("endDate",null)};return e.jsxs(b,{spacing:1.5,...h,children:[e.jsxs(R,{sx:{typography:"body2"},children:[e.jsx("strong",{children:l}),e.jsx(R,{component:"span",sx:{color:"text.secondary",ml:.25},children:"results found"})]}),e.jsxs(b,{flexGrow:1,spacing:1,direction:"row",flexWrap:"wrap",alignItems:"center",children:[!!o.type.length&&e.jsx(se,{label:"Types:",children:o.type.map(a=>e.jsx(ne,{label:a,size:"small",onDelete:()=>s(a)},a))}),o.startDate&&o.endDate&&e.jsx(se,{label:"Date:",children:e.jsx(ne,{size:"small",label:g,onDelete:f})}),p&&e.jsx(A,{color:"error",onClick:t,startIcon:e.jsx(r,{icon:"solar:trash-bin-trash-bold"}),children:"Clear"})]})]})}Pe.propTypes={canReset:n.bool,filters:n.object,onFilters:n.func,onResetFilters:n.func,results:n.number};function se({label:o,children:i,sx:p,...t}){return e.jsxs(b,{component:le,variant:"outlined",spacing:1,direction:"row",sx:{p:1,borderRadius:1,overflow:"hidden",borderStyle:"dashed",...p},...t,children:[e.jsx(R,{component:"span",sx:{typography:"subtitle2"},children:o}),e.jsx(b,{spacing:1,direction:"row",flexWrap:"wrap",children:i})]})}se.propTypes={children:n.node,label:n.string,sx:n.object};const je={name:"",type:[],startDate:null,endDate:null};function jo(){const o=Ke({defaultRowsPerPage:10}),i=Ne(),p=w(),t=w(),l=w(),[h,g]=x.useState("list"),[s,f]=x.useState($e),[a,C]=x.useState(je),j=a.startDate&&a.endDate?a.startDate.getTime()>a.endDate.getTime():!1,u=bo({inputData:s,comparator:He(o.order,o.orderBy),filters:a,dateError:j}),v=u.slice(o.page*o.rowsPerPage,o.page*o.rowsPerPage+o.rowsPerPage),y=!!a.name||!!a.type.length||!!a.startDate&&!!a.endDate,m=!u.length&&y||!u.length,k=x.useCallback((S,P)=>{P!==null&&g(P)},[]),d=x.useCallback((S,P)=>{o.onResetPage(),C(B=>({...B,[S]:P}))},[o]),T=x.useCallback(S=>{const P=s.filter(B=>B.id!==S);f(P),o.onUpdatePageDeleteRow(v.length)},[v.length,o,s]),F=x.useCallback(()=>{const S=s.filter(P=>!o.selected.includes(P.id));f(S),o.onUpdatePageDeleteRows({totalRows:s.length,totalRowsInPage:v.length,totalRowsFiltered:u.length})},[u.length,v.length,o,s]),c=x.useCallback(()=>{C(je)},[]),D=e.jsxs(b,{spacing:2,direction:{xs:"column",md:"row"},alignItems:{xs:"flex-end",md:"center"},children:[e.jsx(Fe,{openDateRange:p.value,onCloseDateRange:p.onFalse,onOpenDateRange:p.onTrue,filters:a,onFilters:d,dateError:j,typeOptions:Ue}),e.jsxs(uo,{size:"small",value:h,exclusive:!0,onChange:k,children:[e.jsx(ge,{value:"list",children:e.jsx(r,{icon:"solar:list-bold"})}),e.jsx(ge,{value:"grid",children:e.jsx(r,{icon:"mingcute:dot-grid-fill"})})]})]}),z=e.jsx(Pe,{filters:a,onResetFilters:c,canReset:y,onFilters:d,results:u.length});return e.jsxs(e.Fragment,{children:[e.jsxs(Ge,{maxWidth:i.themeStretch?!1:"lg",children:[e.jsxs(b,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[e.jsx(M,{variant:"h4",children:"File Manager"}),e.jsx(A,{variant:"contained",startIcon:e.jsx(r,{icon:"eva:cloud-upload-fill"}),onClick:l.onTrue,children:"Upload"})]}),e.jsxs(b,{spacing:2.5,sx:{my:{xs:3,md:5}},children:[D,y&&z]}),m?e.jsx(_e,{filled:!0,title:"No Data",sx:{py:10}}):e.jsx(e.Fragment,{children:h==="list"?e.jsx(Te,{table:o,tableData:s,dataFiltered:u,onDeleteRow:T,notFound:m,onOpenConfirm:t.onTrue}):e.jsx(Re,{table:o,data:s,dataFiltered:u,onDeleteItem:T,onOpenConfirm:t.onTrue})})]}),e.jsx(K,{open:l.value,onClose:l.onFalse}),e.jsx(X,{open:t.value,onClose:t.onFalse,title:"Delete",content:e.jsxs(e.Fragment,{children:["Are you sure want to delete ",e.jsxs("strong",{children:[" ",o.selected.length," "]})," items?"]}),action:e.jsx(A,{variant:"contained",color:"error",onClick:()=>{F(),t.onFalse()},children:"Delete"})})]})}function bo({inputData:o,comparator:i,filters:p,dateError:t}){const{name:l,type:h,startDate:g,endDate:s}=p,f=o.map((a,C)=>[a,C]);return f.sort((a,C)=>{const j=i(a[0],C[0]);return j!==0?j:a[1]-C[1]}),o=f.map(a=>a[0]),l&&(o=o.filter(a=>a.name.toLowerCase().indexOf(l.toLowerCase())!==-1)),h.length&&(o=o.filter(a=>h.includes(ye(a.type)))),t||g&&s&&(o=o.filter(a=>H(a.createdAt)>=H(g)&&H(a.createdAt)<=H(s))),o}function bn(){return e.jsxs(e.Fragment,{children:[e.jsx(Ve,{children:e.jsx("title",{children:" Dashboard: File Manager"})}),e.jsx(jo,{})]})}export{bn as default};
